webpackJsonp([45],{1094:function(e,t){},1095:function(e,t){},118:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{message:[],closed:!1,timer:null}},watch:{closed:function(e){e&&this.destroyElement()}},methods:{destroyElement:function(){this.$destroy(),this.$el.parentNode.removeChild(this.$el)},startTimer:function(){var e=this;this.timer=setTimeout(function(){e.closed||(e.closed=!0)},2e3)}},mounted:function(){this.startTimer()}}},119:function(e,t){},120:function(e,t,a){function s(e){a(119)}var r=a(65)(a(118),a(121),s,null,null);e.exports=r.exports},121:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{appear:"",name:"zd-message-fade"}},[a("div",{staticClass:"zd-message-wrapper"},[a("div",{staticClass:"zd-message"},e._l(e.message,function(t){return a("p",{staticClass:"zd-message-word"},[e._v(e._s(t))])}))])])},staticRenderFns:[]}},1279:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"contain-main"},[a("div",{staticClass:"goodsdetail-detail"},[a("div",{staticClass:"contain-title"},[a("span",[e._v("商品详情页")]),e._v(" "),a("el-button",{directives:[{name:"permit",rawName:"v-permit",value:3102,expression:"3102"}],attrs:{type:"primary",size:"small"},on:{click:e.editMerchandise}},[e._v("编辑")]),e._v(" "),a("el-button",{directives:[{name:"permit",rawName:"v-permit",value:3102,expression:"3102"}],attrs:{type:"primary",size:"small"},on:{click:e.upMerchandise}},[e._v(e._s("已上架"===e.info.status?"下架":"上架"))]),e._v(" "),a("el-button",{directives:[{name:"permit",rawName:"v-permit",value:3102,expression:"3102"}],attrs:{type:"primary",size:"small",disabled:0===e.info.grouped},on:{click:e.groupPurchaseDialog}},[e._v("发起团购")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.routerBack}},[e._v("返回")])],1),e._v(" "),a("el-form",{attrs:{"label-width":"120px","label-position":"left"}},[a("div",{staticClass:"goodsdetail-form"},[a("el-form-item",{attrs:{label:"商品编码:"}},[a("span",[e._v(e._s(e.info.sku))])]),e._v(" "),a("el-form-item",{attrs:{label:"商品名称:"}},[a("span",[e._v(e._s(e.info.name))])])],1),e._v(" "),a("div",{staticClass:"goodsdetail-form"},[a("el-form-item",{attrs:{label:"商品净含量:"}},[a("span",[e._v(e._s(e.info.content))])]),e._v(" "),a("el-form-item",{attrs:{label:"商品描述:"}},[a("span",[e._v(e._s(e.info.description))])])],1),e._v(" "),a("div",{staticClass:"goodsdetail-form"},[a("el-form-item",{attrs:{label:"原价(元):"}},[a("span",[e._v(e._s(e.info.price))])]),e._v(" "),a("el-form-item",{attrs:{label:"单买价(元)："}},[a("span",[e._v(e._s(e.info.specialPrice))])])],1),e._v(" "),a("div",{staticClass:"goodsdetail-form"},[a("el-form-item",{attrs:{label:"状态："}},[a("pre",[e._v(e._s(e.info.status))])]),e._v(" "),a("el-form-item",{attrs:{label:"商品介绍："}},[a("img",{staticClass:"repairmentInfo-img",attrs:{src:e.info.detailImg},on:{click:function(t){e.handleBigImage(e.info.detailImg)}}})])],1),e._v(" "),a("el-form-item",{attrs:{label:"商品轮播图："}},e._l(e.info.img,function(t){return a("img",{key:t,staticClass:"repairmentInfo-img",attrs:{src:t},on:{click:function(a){e.handleBigImage(t)}}})})),e._v(" "),a("div",{staticClass:"goodsdetail-group"},[a("h5",[e._v("\n                    商品拼团信息\n                ")]),e._v(" "),a("div",{staticClass:"goodsdetail-formins"},[a("div",[a("span",[e._v("拼团价(元)：")]),e._v(" "),a("span",[e._v("\n                            "+e._s(e.goodGroupMes.prise)+"\n                        ")])]),e._v(" "),a("div",[a("span",[e._v("成团份数：")]),e._v(" "),a("span",[e._v("\n                            "+e._s(e.goodGroupMes.count)+"\n                        ")])]),e._v(" "),a("div",[a("span",[e._v("拼团有效期(小时)：")]),e._v(" "),a("span",[e._v("\n                            "+e._s(e.goodGroupMes.date)+"\n                        ")])])]),e._v(" "),1==e.info.spelled?a("div",{staticClass:"goodsdetail-group-btn"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){t.stopPropagation(),e.dialogFormVisible=!0}}},[e._v("编辑")]),e._v(" "),a("el-button",{directives:[{name:"permit",rawName:"v-permit",value:3102,expression:"3102"}],attrs:{type:"primary",size:"small"},on:{click:e.cancelMerchandise}},[e._v("取消拼团")])],1):e._e(),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.dialogFormVisible,expression:"dialogFormVisible"}],staticClass:"goodsdetail-dialogbg"},[a("div",{staticClass:"goodsdetail-dialog"},[a("div",{staticClass:"goodsdetail-dialog-special"},[a("span",[e._v("拼团价格:")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.goodstartMes.prise,expression:"goodstartMes.prise"}],staticClass:"goodsdetail-dialog-prise",class:[e.priceErr?"errinput":""],attrs:{autocomplete:"off",placeholder:"请输入"},domProps:{value:e.goodstartMes.prise},on:{change:e.limitpriceNumber,input:function(t){t.target.composing||(e.goodstartMes.prise=t.target.value)}}}),e._v(" "),a("span",[e._v("元")])]),e._v(" "),a("div",[a("span",[e._v("成团数量:")]),e._v(" "),a("div",{staticClass:"goodsdetail-dialog-count"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.goodstartMes.count,expression:"goodstartMes.count"}],class:[e.countErr?"errinput":""],attrs:{autocomplete:"off",type:"text"},domProps:{value:e.goodstartMes.count},on:{change:e.limitNumber,input:function(t){t.target.composing||(e.goodstartMes.count=t.target.value)}}}),e._v(" "),a("div",{staticClass:"goodsdetail-dialog-add",class:[e.goodstartMes.count<e.countMax&&!e.countErr?"iconCanbg":"iconNobg"],on:{click:function(t){e.goodstartMes.count<e.countMax&&!e.countErr&&e.goodstartMes.count++}}},[a("i",{staticClass:"el-icon-arrow-up"})]),e._v(" "),a("div",{staticClass:"goodsdetail-dialog-down",class:[(e.goodstartMes.count&&!e.countErr)>0?"iconCanbg":"iconNobg"],on:{click:function(t){e.goodstartMes.count>0&&!e.countErr&&e.goodstartMes.count--}}},[a("i",{staticClass:"el-icon-arrow-down"})])])]),e._v(" "),a("div",[a("span",[e._v("拼团有效时间:")]),e._v(" "),a("div",{staticClass:"goodsdetail-dialog-count"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.goodstartMes.date,expression:"goodstartMes.date"}],class:[e.dateErr?"errinput":""],attrs:{autocomplete:"off",type:"text"},domProps:{value:e.goodstartMes.date},on:{change:e.limitdate,input:function(t){t.target.composing||(e.goodstartMes.date=t.target.value)}}}),e._v(" "),a("div",{staticClass:"goodsdetail-dialog-add",class:[e.goodstartMes.date<e.dateMax&&!e.dateErr?"iconCanbg":"iconNobg"],on:{click:function(t){e.goodstartMes.date<e.dateMax&&!e.dateErr&&e.goodstartMes.date++}}},[a("i",{staticClass:"el-icon-arrow-up"})]),e._v(" "),a("div",{staticClass:"goodsdetail-dialog-down",class:[e.goodstartMes.date>0&&!e.dateErr?"iconCanbg":"iconNobg"],on:{click:function(t){e.goodstartMes.date>0&&!e.dateErr&&e.goodstartMes.date--}}},[a("i",{staticClass:"el-icon-arrow-down"})])]),e._v(" "),a("span",[e._v("小时")])]),e._v(" "),a("div",[a("el-button",{attrs:{type:"primary"},on:{click:e.sureGroupMes}},[e._v("确定")]),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")])],1)])]),e._v(" "),e.info.spelled?e._e():a("div",{staticClass:"goodsdetail-group-btn"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("开启拼团")])],1)])],1)],1),e._v(" "),a("div",{staticClass:"goodsdetail-history"},[a("div",{staticClass:"goodsdetail-history-title"},[a("p",[e._v("历史记录")]),e._v(" "),a("div",{staticClass:"goodsdetail-history-title-tab"},[a("span",{staticClass:"goodsdetail-history-title-singlebuy",class:[e.bg.singlebg?"bluecolor":"greycolor"],on:{click:e.singlebuy}},[e._v("单买")]),e._v(" "),a("span",{staticClass:"goodsdetail-history-title-groupbuy",class:[e.bg.groupbg?"bluecolor":"greycolor"],on:{click:e.groupbuy}},[e._v("团购")]),e._v(" "),a("span",{staticClass:"goodsdetail-history-title-playbuy",class:[e.bg.playbg?"bluecolor":"greycolor"],on:{click:e.playbuy}},[e._v("拼团")])])]),e._v(" "),a("el-form",[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.bg.singlebg,expression:"bg.singlebg"}]},[a("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:e.singleTableDataList,"min-width":"100"}},[a("el-table-column",{attrs:{prop:"orderId",label:"编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"buyerName",label:"买家姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createDatetime",label:"购买时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"quantity",label:"购买数量"}}),e._v(" "),a("el-table-column",{attrs:{prop:"amount",label:"金额(元)"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态","column-key":"status",filters:[{text:"待发货",value:"1"},{text:"已发货",value:"2"},{text:"已完成",value:"3"}],"filter-multiple":!1,"filter-method":e.filterTag},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(1==t.row.status?"待发货":2==t.row.status?"已发货":"已完成"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"goodsdetail-history-operate"},[a("a",{directives:[{name:"permit",rawName:"v-permit",value:3100,expression:"3100"}],on:{click:function(a){e.exportSingleOrder(t.row.id)}}},[e._v("导出订单")])])]}}])})],1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.bg.groupbg,expression:"bg.groupbg"}]},[a("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:e.info.tableData,"min-width":"100"}},[a("el-table-column",{attrs:{prop:"id",label:"编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"groupPrice",label:"团购价(元)"}}),e._v(" "),a("el-table-column",{attrs:{prop:"startDatetime",label:"开始时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"endDatetime",label:"结束时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"maxCount",label:"成团人数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"realCount",label:"已参团人数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.status))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"goodsdetail-history-operate"},[a("a",{directives:[{name:"permit",rawName:"v-permit",value:3102,expression:"3102"}],class:["未开始"===t.row.status?"":"greyC"],on:{click:function(a){e.editGroupPurchase(t.row)}}},[e._v("编辑")]),e._v(" "),a("span",[e._v("|")]),e._v(" "),a("a",{directives:[{name:"permit",rawName:"v-permit",value:3100,expression:"3100"}],on:{click:function(a){e.exportOrder(t.row.id)}}},[e._v("导出订单")]),e._v(" "),a("span",[e._v("|")]),e._v(" "),a("a",{class:["进行中"==t.row.status?"":"greyC"],on:{click:function(a){e.forceGroup(t.row.id,t.row.status)}}},[e._v("强制成团")])])]}}])})],1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.bg.playbg,expression:"bg.playbg"}]},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.playTableDataList,"min-width":"100"}},[a("el-table-column",{attrs:{label:"编号",type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"团长："}},[a("span",[e._v(e._s(t.row.merchandiseSpellDetailList[0]?t.row.merchandiseSpellDetailList[0].member:""))])]),e._v(" "),a("el-form-item",{attrs:{label:"手机号："}},[a("span",[e._v(e._s(t.row.merchandiseSpellDetailList[0]?t.row.merchandiseSpellDetailList[0].cellphone:""))])]),e._v(" "),a("el-form-item",{attrs:{label:"地址："}},[a("span",[e._v(e._s(t.row.merchandiseSpellDetailList[0]?t.row.merchandiseSpellDetailList[0].address:""))])]),e._v(" "),a("el-form-item",{attrs:{label:"成员："}},[a("span",[e._v(e._s(t.row.merchandiseSpellDetailList[1]?t.row.merchandiseSpellDetailList[1].member:""))])]),e._v(" "),a("el-form-item",{attrs:{label:"手机号："}},[a("span",[e._v(e._s(t.row.merchandiseSpellDetailList[1]?t.row.merchandiseSpellDetailList[1].cellphone:""))])]),e._v(" "),a("el-form-item",{attrs:{label:"地址："}},[a("span",[e._v(e._s(t.row.merchandiseSpellDetailList[1]?t.row.merchandiseSpellDetailList[1].address:""))])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"groupPrice",label:"拼团价(元)"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createDatetime",label:"开始时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"completeDatetime",label:"结束时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"maxCount",label:"成团人数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"quantity",label:"已参团人数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态","column-key":"status",filters:[{text:"已成团",value:"3"},{text:"团购失败",value:"4"},{text:"团购中",value:"2"},{text:"团购未开始",value:"1"},{text:"团购结束",value:"5"}],"filter-multiple":!1,"filter-method":e.filterTag},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(3==t.row.status?"已成团":4==t.row.status?"团购失败":2==t.row.status?"团购中":1==t.row.status?"团购未开始":"团购结束"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"goodsdetail-history-operate"},[a("a",{directives:[{name:"permit",rawName:"v-permit",value:3100,expression:"3100"}],on:{click:function(a){e.exportOrder(t.row.id)}}},[e._v("导出订单")])])]}}])})],1)],1)],1),e._v(" "),a("div",{staticClass:"goodsdetail-history-page"},[a("el-pagination",{attrs:{"current-page":e.pageData.currentPage,"page-sizes":[10,20,50,100],"page-size":e.pageData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pageData.totalSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("div"),e._v(" "),a("el-dialog",{attrs:{title:"发起团购"},on:{close:e.handleResetGroupPurchase},model:{value:e.groupPurchaseDialogVisible,callback:function(t){e.groupPurchaseDialogVisible=t},expression:"groupPurchaseDialogVisible"}},[a("el-form",{ref:"groupPurchaseForm",staticClass:"scoped-form",attrs:{model:e.groupPurchaseFormData,rules:e.groupPurchaseFormRules,"label-width":"110px"}},[a("el-form-item",{attrs:{label:"团购开始时间",prop:"startDatetime"}},[a("el-date-picker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm:ss"},model:{value:e.groupPurchaseFormData.startDatetime,callback:function(t){e.groupPurchaseFormData.startDatetime=t},expression:"groupPurchaseFormData.startDatetime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"团购结束时间",prop:"endDatetime"}},[a("el-date-picker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm:ss"},model:{value:e.groupPurchaseFormData.endDatetime,callback:function(t){e.groupPurchaseFormData.endDatetime=t},expression:"groupPurchaseFormData.endDatetime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"团购数量",prop:"maxCount"}},[a("el-input-number",{attrs:{min:0},model:{value:e.groupPurchaseFormData.maxCount,callback:function(t){e.groupPurchaseFormData.maxCount=t},expression:"groupPurchaseFormData.maxCount"}})],1),e._v(" "),a("el-form-item",{staticClass:"scoped-form-input",attrs:{label:"团购价格(元)",prop:"price"}},[a("el-input",{model:{value:e.groupPurchaseFormData.price,callback:function(t){e.groupPurchaseFormData.price=e._n(t)},expression:"groupPurchaseFormData.price"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",slot:"footer"},[a("el-button",{on:{click:e.handleCancelGroupPurchase}},[e._v("取 消")]),e._v(" "),a("el-button",{directives:[{name:"permit",rawName:"v-permit",value:3102,expression:"3102"}],attrs:{type:"primary"},on:{click:e.handleSubmitGroupPurchase}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑团购"},on:{close:e.handleResetEditGroupPurchase},model:{value:e.editGroupPurchaseDialogVisible,callback:function(t){e.editGroupPurchaseDialogVisible=t},expression:"editGroupPurchaseDialogVisible"}},[a("el-form",{ref:"editGroupPurchaseForm",attrs:{model:e.editGroupPurchaseFormData,rules:e.groupPurchaseFormRules,"label-width":"110px"}},[a("el-form-item",{attrs:{label:"团购开始时间",prop:"startDatetime"}},[a("el-date-picker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm:ss"},model:{value:e.editGroupPurchaseFormData.startDatetime,callback:function(t){e.editGroupPurchaseFormData.startDatetime=t},expression:"editGroupPurchaseFormData.startDatetime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"团购结束时间",prop:"endDatetime"}},[a("el-date-picker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm:ss"},model:{value:e.editGroupPurchaseFormData.endDatetime,callback:function(t){e.editGroupPurchaseFormData.endDatetime=t},expression:"editGroupPurchaseFormData.endDatetime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"团购数量",prop:"maxCount"}},[a("el-input-number",{attrs:{min:0},model:{value:e.editGroupPurchaseFormData.maxCount,callback:function(t){e.editGroupPurchaseFormData.maxCount=t},expression:"editGroupPurchaseFormData.maxCount"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"团购价格(元)",prop:"price"}},[a("el-input",{attrs:{debounce:600},model:{value:e.editGroupPurchaseFormData.price,callback:function(t){e.editGroupPurchaseFormData.price=t},expression:"editGroupPurchaseFormData.price"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",slot:"footer"},[a("el-button",{on:{click:e.handleCancelEditGroupPurchase}},[e._v("取 消")]),e._v(" "),a("el-button",{directives:[{name:"permit",rawName:"v-permit",value:3102,expression:"3102"}],attrs:{type:"primary"},on:{click:e.handleSubmitEditGroupPurchase}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{size:"tiny"},model:{value:e.bigImgVisible,callback:function(t){e.bigImgVisible=t},expression:"bigImgVisible"}},[a("img",{attrs:{width:"100%",src:e.bigImageUrl,alt:""}})])],1)},staticRenderFns:[]}},379:function(e,t,a){function s(e){a(1094),a(1095)}var r=a(65)(a(890),a(1279),s,"data-v-7e6d825e",null);e.exports=r.exports},74:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(6),r=function(e){return e&&e.__esModule?e:{default:e}}(s),i=r.default.extend(a(120)),o=function(e){"string"==typeof e&&(e={message:[e]});var t=new i({data:e});return t.vm=t.$mount(),document.body.appendChild(t.vm.$el),t.vm};t.default=o},890:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(74);!function(e){e&&e.__esModule}(s);t.default={data:function(){var e=this;return{priceErr:!1,dateErr:!1,countErr:!1,dateMax:720,countMax:999,upDown:1,hisStatus:0,nowPage:1,bg:{singlebg:!0,groupbg:!0,playbg:!0},goodstartMes:{prise:"",count:0,date:0},goodGroupMes:{prise:"",count:"",date:""},dialogFormVisible:!1,pageData:{currentPage:void 0!==this.$route.query.currentPage?parseInt(this.$route.query.currentPage):1,totalSize:10,pageSize:10},form:{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""},info:{sku:"",name:"",price:"",content:"",status:"",description:"",img:"",detailImg:"",spelled:""},singleTableDataList:[],playTableDataList:[],groupPurchaseDialogVisible:!1,groupPurchaseFormData:{id:this.$route.query.id,startDatetime:"",endDatetime:"",maxCount:0,price:"0"},editGroupPurchaseDialogVisible:!1,editGroupPurchaseFormData:{groupPurchaseId:"",startDatetime:"",endDatetime:"",maxCount:0,price:0},groupPurchaseFormRules:{startDatetime:[{type:"date",required:!0,message:"请选择开始日期时间",trigger:"blur"}],endDatetime:[{type:"date",required:!0,message:"请选择结束日期时间",trigger:"blur"}],maxCount:[{type:"number",required:!0,trigger:"blur"}],price:[{validator:function(t,a,s){""==a&&(e.groupPurchaseFormData.price=0);var r=a,i=r.toString().replace(/[^\d\.]/g,"");-1!=i.indexOf(".")&&i.split(".")[1].length>1&&(i=i.split(".")[0]+"."+i.split(".")[1].substr(0,2)),i=i>99999.99?99999.99:i,r!=i?s(new Error("限制100000.00元以内")):s()},trigger:"blur"}]},bigImageUrl:"",bigImgVisible:!1}},methods:{handleBigImage:function(e){this.bigImageUrl=e,this.bigImgVisible=!0},limitpriceNumber:function(){if(""==this.goodstartMes.prise)this.priceErr=!0,this.$message("请输入拼团价格");else{var e=this.goodstartMes.prise,t=this.goodstartMes.prise.replace(/[^\d\.]/g,"").toString();-1!=t.indexOf(".")&&t.split(".")[1].length>1&&(console.log(t),console.log(t.split(".")[1]),t=t.split(".")[0]+"."+t.split(".")[1].substr(0,2)),t=t>99999.99?99999.99:t,e!=t?(this.priceErr=!0,this.$message("拼团价格请输入小于100000且小数点后不超过两位的小数")):(this.goodstartMes.prise=parseFloat(this.goodstartMes.prise),this.priceErr=!1)}},limitNumber:function(){if(""==this.goodstartMes.count)this.countErr=!0,this.$message("请输入成团数量");else{var e=this.goodstartMes.count,t=parseInt(this.goodstartMes.count.replace(/[^0-9]+/,""));t=t>this.countMax?this.countMax:t,e!=t?(this.countErr=!0,this.$message("成团数量请输入小于10000的正整数")):(this.goodstartMes.count=parseInt(this.goodstartMes.count),this.countErr=!1)}},limitdate:function(){if(""==this.goodstartMes.date)this.dateErr=!0,this.$message("请输入拼团有效时间");else{var e=this.goodstartMes.date,t=parseInt(this.goodstartMes.date.replace(/[^0-9]+/,""));t=t>this.countMax?this.countMax:t,e!=t?(this.dateErr=!0,this.$message("拼团有效时间请输入不大于720的正整数")):(this.goodstartMes.date=parseInt(this.goodstartMes.date),this.dateErr=!1)}},sureGroupMes:function(){var e=this;console.log(this.priceErr),console.log(this.dateErr),console.log(this.countErr),""==this.goodstartMes.prise?this.$message("请输入拼团价格"):this.priceErr||this.dateErr||this.countErr?(console.log(123),this.$message("请先填入正确数据")):this.$http({url:"/api/manageSystem/system/mall/merchandise/merchandise/setTogetherInfo",method:"patch",data:{merchandiseId:this.$route.query.id,lumpCount:this.goodstartMes.count,validTime:this.goodstartMes.date,spellPrice:this.goodstartMes.prise}}).then(function(t){console.log(t),e.dialogFormVisible=!1,e.goodGroupMes.count=e.goodstartMes.count,e.goodGroupMes.prise=e.goodstartMes.prise,e.goodGroupMes.date=e.goodstartMes.date,e.info.spelled=1}).catch(function(e){console.log(e)})},cancelMerchandise:function(){var e=this;this.$http({url:"/api/manageSystem/system/mall/merchandise/merchandise/cancelGroup",method:"patch",data:{merchandiseId:this.$route.query.id}}).then(function(t){console.log(t),e.info.spelled=0,e.goodGroupMes={},e.goodstartMes={prise:"",count:1,date:1}}).catch(function(e){console.log(e)})},upMerchandise:function(){var e=this;this.$http({url:"/api/manageSystem/system/mall/merchandise/merchandise/goodsUpDown",method:"patch",data:{merchandiseId:this.$route.query.id,operationType:"已上架"===this.info.status?1:2}}).then(function(t){"00000"===t.data.code&&("未上架"===e.info.status?e.info.status="已上架":e.info.status="未上架")}).catch(function(e){console.log(e)})},singlebuy:function(){this.bg.playbg=!1,this.bg.groupbg=!1,this.bg.singlebg=!0,this.nowPage=1,this.watchQueryFun()},groupbuy:function(){this.bg.playbg=!1,this.bg.singlebg=!1,this.bg.groupbg=!0,this.nowPage=2,this.watchQueryFun()},playbuy:function(){this.bg.groupbg=!1,this.bg.singlebg=!1,this.bg.playbg=!0,this.nowPage=3,this.watchQueryFun()},filterTag:function(e,t){return this.hisStatus=e,t.status==e},editMerchandise:function(){console.log(this.pageData.currentPage),this.$router.push({path:"/manageSystem/mall/merchandise/merchandise/editMerchandise",query:{id:this.$route.query.id,status:this.hisStatus,pageNo:this.pageData.currentPage,pageSize:this.pageData.pageSize}})},routerBack:function(){this.$router.push("/manageSystem/mall/merchandise/merchandise")},groupPurchaseDialog:function(){this.groupPurchaseDialogVisible=!0},handleResetGroupPurchase:function(){this.groupPurchaseFormData.startDatetime="",this.groupPurchaseFormData.endDatetime="",this.groupPurchaseFormData.maxCount=0,this.groupPurchaseFormData.price=0},handleSubmitGroupPurchase:function(){var e=this;this.$refs.groupPurchaseForm.validate(function(t){if(!t)return!1;e.$http({url:"/api/manageSystem/system/mall/merchandise/groupPurchase/createGroupPurchase",method:"post",data:e.groupPurchaseFormData}).then(function(t){"00000"===t.data.code&&(e.$message("发起团购成功"),e.groupPurchaseDialogVisible=!1,e.$router.push("/manageSystem/mall/merchandise/merchandise"))}).catch(function(e){console.log(e)})})},handleCancelGroupPurchase:function(){this.groupPurchaseDialogVisible=!1},editGroupPurchase:function(e){"未开始"===e.status&&(this.editGroupPurchaseDialogVisible=!0,this.editGroupPurchaseFormData.groupPurchaseId=e.id,this.editGroupPurchaseFormData.startDatetime=new Date(e.startDatetime),this.editGroupPurchaseFormData.endDatetime=new Date(e.endDatetime),this.editGroupPurchaseFormData.maxCount=e.maxCount,this.editGroupPurchaseFormData.price=e.groupPrice)},handleResetEditGroupPurchase:function(){this.editGroupPurchaseFormData.groupPurchaseId="",this.editGroupPurchaseFormData.startDatetime="",this.editGroupPurchaseFormData.endDatetime="",this.editGroupPurchaseFormData.maxCount=0,this.editGroupPurchaseFormData.price=0},handleCancelEditGroupPurchase:function(){this.editGroupPurchaseDialogVisible=!1},handleSubmitEditGroupPurchase:function(){var e=this;this.$refs.editGroupPurchaseForm.validate(function(t){if(!t)return!1;e.$http({url:"/api/manageSystem/system/mall/merchandise/groupPurchase/editGroupPurchase",method:"post",data:e.editGroupPurchaseFormData}).then(function(t){"00000"===t.data.code&&(e.$message("编辑团购成功"),e.editGroupPurchaseDialogVisible=!1,e.$router.push("/manageSystem/mall/merchandise/merchandise"))}).catch(function(e){console.log(e)})})},exportSingleOrder:function(e){this.$http({url:"/api/manageSystem/system/mall/merchandise/groupPurchase/exportSingleOrder",method:"get",params:{id:e}}).then(function(e){"00000"===e.data.code&&window.open(e.data.path)}).catch(function(e){console.log(e)})},exportOrder:function(e){this.$http({url:"/api/manageSystem/system/mall/merchandise/groupPurchase/exportOrder",method:"get",params:{id:e}}).then(function(e){"00000"===e.data.code&&window.open(e.data.path)}).catch(function(e){console.log(e)})},forceGroup:function(e,t){var a=this;"进行中"==t&&this.$http({url:"/api/manageSystem/system/mall/merchandise/merchandise/forceGroup",method:"patch",data:{groupId:e}}).then(function(e){"00000"===e.data.code&&(a.$message("拼团成功"),a.groupbuy())}).catch(function(e){console.log(e)})},watchQueryFun:function(){this.$route.query.currentPage?this.pageData.currentPage=parseInt(this.$route.query.currentPage):this.pageData.currentPage=1,this.ajaxFun()},addZero:function(e){return e<10&&e>=0&&(e="0"+e),e},formatTime:function(e){var t=new Date(e);return this.addZero(t.getFullYear())+"-"+this.addZero(t.getMonth()+1)+"-"+this.addZero(t.getDate())+" "+this.addZero(t.getHours())+":"+this.addZero(t.getMinutes())+":"+this.addZero(t.getSeconds())},ajaxFun:function(){var e=this;1===this.nowPage?this.$http({method:"get",url:"/api/manageSystem/system/mall/merchandise/merchandise/getAloneInfo",params:{merchandiseId:this.$route.query.id,status:this.hisStatus,pageNo:this.pageData.currentPage,pageSize:this.pageData.pageSize}}).then(function(t){if("00000"===t.data.code){e.singleTableDataList=t.data.data.list,e.pageData.totalSize=t.data.data.total;for(var a=0;a<e.singleTableDataList.length;a++){var s=new Date(e.singleTableDataList[a].createDatetime),r=e.formatTime(s);e.singleTableDataList[a].createDatetime=r}console.log(e.singleTableDataList)}}).catch(function(e){console.log(e)}):2===this.nowPage?this.$http({url:"/api/manageSystem/system/mall/merchandise/merchandise/getMerchandiseInfo",params:{id:this.$route.query.id}}).then(function(t){"00000"===t.data.code&&(e.info.tableData=t.data.merchandiseInfo.tableData)}).catch(function(e){console.log(e)}):3===this.nowPage&&this.$http({method:"get",url:"/api/manageSystem/system/mall/merchandise/merchandise/getTogetherInfo",params:{merchandiseId:this.$route.query.id,status:this.hisStatus,pageNo:this.pageData.currentPage,pageSize:this.pageData.pageSize}}).then(function(t){if("00000"===t.data.code){e.playTableDataList=t.data.data.list,e.pageData.totalSize=t.data.data.total;for(var a=0;a<e.playTableDataList.length;a++){var s=new Date(e.playTableDataList[a].createDatetime),r=e.formatTime(s);e.playTableDataList[a].createDatetime=r;var i=new Date(e.playTableDataList[a].completeDatetime),o=e.formatTime(i);e.playTableDataList[a].completeDatetime=o}console.log(e.playTableDataList)}}).catch(function(e){console.log(e)})},handleSizeChange:function(e){this.pageData.pageSize=e,this.$route.query.currentPage?this.$router.push({path:"/manageSystem/mall/merchandise/merchandise/merchandiseInfo",query:{id:this.$route.query.id}}):this.$router.push({path:"/manageSystem/mall/merchandise/merchandise/merchandiseInfo",query:{id:this.$route.query.id,currentPage:1}})},handleCurrentChange:function(e){this.$router.push({path:"/manageSystem/mall/merchandise/merchandise/merchandiseInfo",query:{id:this.$route.query.id,currentPage:e}})}},mounted:function(){var e=this;this.bg.groupbg=!1,this.bg.playbg=!1,this.watchQueryFun(this.nowPage),this.$http({url:"/api/manageSystem/system/mall/merchandise/merchandise/getMerchandiseInfo",params:{id:this.$route.query.id}}).then(function(t){"00000"===t.data.code&&(e.info=t.data.merchandiseInfo,1==e.info.spelled&&(e.goodGroupMes.count=e.info.lumpCount,e.goodGroupMes.prise=e.info.spellPrice,e.goodGroupMes.date=e.info.validDate))}).catch(function(e){console.log(e)})},watch:{"$route.query.currentPage":function(){this.watchQueryFun()}}}}});