webpackJsonp([102],{1072:function(t,e){},1257:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contain-main"},[t._m(0),t._v(" "),a("el-form",{ref:"formData",staticClass:"scoped-form",attrs:{rules:t.formRules,model:t.formData,"label-width":"100px","label-position":"left"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"编号："}},[a("span",[t._v(t._s(t.info.number))])])],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"报事类型"}},[a("span",[t._v(t._s(t.info.type))])])],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"状态"}},[a("span",[t._v(t._s(t.info.status))])])],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"联系人"}},[a("span",[t._v(t._s(t.info.contactPerson))])])],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"联系方式"}},[a("span",[t._v(t._s(t.info.contactPersonCellphone))])])],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"报修时间"}},[a("span",[t._v(t._s(t.info.datetime))])])],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"标题"}},[a("span",[t._v(t._s(t.info.title))])])],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"内容"}},[a("pre",[t._v(t._s(t.info.content))])])],1)],1),t._v(" "),0!==t.info.imgList.length?a("el-form-item",{attrs:{label:"报事图片"}},t._l(t.info.imgList,function(e){return a("img",{key:e,staticClass:"repairmentInfo-img",attrs:{src:e},on:{click:function(a){t.handleBigImage(e)}}})})):t._e(),t._v(" "),1===t.info.statusCode?a("el-form-item",{attrs:{label:"完成备注",prop:"remark"}},[a("el-input",{model:{value:t.formData.remark,callback:function(e){t.formData.remark=e},expression:"formData.remark"}})],1):t._e(),t._v(" "),a("el-form-item",[1===t.info.statusCode?a("el-button",{directives:[{name:"permit",rawName:"v-permit",value:1302,expression:"1302"}],attrs:{type:"primary",size:"small"},on:{click:t.handleFinish}},[t._v("处理完成")]):t._e(),t._v(" "),1===t.info.statusCode?a("el-button",{directives:[{name:"permit",rawName:"v-permit",value:1302,expression:"1302"}],attrs:{type:"primary",size:"small"},on:{click:t.handleAppointTask}},[t._v("转派")]):t._e(),t._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:t.handleCancel}},[t._v("返回")])],1)],1),t._v(" "),t._m(1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:t.info.operationRecordsList}},[a("el-table-column",{attrs:{prop:"event",label:"事件","min-width":"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"operation",label:"操作内容","min-width":"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注信息","min-width":"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"operator",label:"操作人","min-width":"160"}}),t._v(" "),a("el-table-column",{attrs:{prop:"operateDatetime",label:"操作时间","min-width":"150"}})],1),t._v(" "),a("el-dialog",{attrs:{title:"转派任务",visible:t.appointTaskDialogVisible,size:"small"},on:{"update:visible":function(e){t.appointTaskDialogVisible=e},close:t.handleResetAppointTask}},[a("el-form",{ref:"appointTaskForm",attrs:{model:t.appointTaskFormData,rules:t.appointTaskFormRules}},[a("el-form-item",{attrs:{prop:"remark"}},[a("el-input",{attrs:{placeholder:"请填写转派备注"},model:{value:t.appointTaskFormData.remark,callback:function(e){t.appointTaskFormData.remark=e},expression:"appointTaskFormData.remark"}})],1),t._v(" "),a("el-form-item",{attrs:{prop:"manager"}},[a("el-select",{style:{width:"100%"},attrs:{filterable:"",placeholder:"请选择要转派的人员"},model:{value:t.appointTaskFormData.manager,callback:function(e){t.appointTaskFormData.manager=e},expression:"appointTaskFormData.manager"}},t._l(t.appointTaskManagerList,function(t){return a("el-option",{key:t.value,attrs:{value:t.value,label:t.label}})}))],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",slot:"footer"},[a("el-button",{on:{click:t.handleCloseAppointTask}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmitAppointTask}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{size:"tiny"},model:{value:t.bigImgVisible,callback:function(e){t.bigImgVisible=e},expression:"bigImgVisible"}},[a("img",{attrs:{width:"100%",src:t.bigImageUrl,alt:""}})])],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contain-title"},[a("span",[t._v("报事详情")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contain-title"},[a("span",[t._v("操作记录")])])}]}},415:function(t,e,a){function r(t){a(1072)}var i=a(65)(a(927),a(1257),r,"data-v-6b414463",null);t.exports=i.exports},927:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{info:{type:"",title:"",contactPerson:"",contactPersonCellphone:"",content:"",datetime:"",status:"",imgList:[],operationRecordsList:[]},formData:{remark:""},formRules:{remark:[{validator:function(t,e,a){""===e?a(new Error("请输入备注")):a()},trigger:"blur"}]},dialogVisible:!1,dialogImageUrl:"",bigImgVisible:!1,bigImageUrl:"",tableData:[],appointTaskManagerList:[],appointTaskDialogVisible:!1,appointTaskFormData:{remark:"",manager:""},appointTaskFormRules:{remark:[{required:!0,message:"请填写备注",trigger:"blur"}],manager:[{type:"number",required:!0,message:"请选择指派人员",trigger:"blur"}]}}},methods:{handleResetAppointTask:function(){this.$refs.appointTaskForm.resetFields()},handleCloseAppointTask:function(){this.appointTaskDialogVisible=!1},handleAppointTask:function(){this.appointTaskDialogVisible=!0},handleSubmitAppointTask:function(){var t=this;t.$refs.appointTaskForm.validate(function(e){if(!e)return!1;t.$http({url:"/api/manageSystem/system/property/report/appointTask",method:"patch",data:{id:t.$route.query.id,remark:t.appointTaskFormData.remark,manager:t.appointTaskFormData.manager}}).then(function(e){"00000"===e.data.code&&(t.$message("转派成功"),t.$router.push("/manageSystem/property/report"))}).catch(function(t){console.log(t)})})},handleFinish:function(){var t=this,e=this;this.$refs.formData.validate(function(a){if(!a)return!1;e.$http({url:"/api/manageSystem/system/property/report/finishReport",method:"patch",data:{id:e.$route.query.id,remark:e.formData.remark}}).then(function(e){"00000"===e.data.code&&(t.$message("处理成功"),t.$router.push("/manageSystem/property/report"))}).catch(function(t){console.log(t)})})},handleCancel:function(){this.$router.push("/manageSystem/property/report")},handleBigImage:function(t){this.bigImageUrl=t,this.bigImgVisible=!0}},mounted:function(){var t=this;this.$http({url:"/api/manageSystem/system/property/report/getReportInfo",params:{id:this.$route.query.id}}).then(function(e){"00000"===e.data.code&&(t.info=e.data.reportInfo)}).catch(function(t){console.log(t)}),this.$http({url:"/api/manageSystem/system/property/report/getAppointTaskManagerList"}).then(function(e){"00000"===e.data.code&&(t.appointTaskManagerList=e.data.managerList)}).catch(function(t){console.log(t)})}}}});