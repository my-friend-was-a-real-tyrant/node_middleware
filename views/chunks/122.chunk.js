webpackJsonp([122],{1077:function(t,e){},1261:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contain-main"},[t._m(0),t._v(" "),a("el-form",{ref:"formData",staticClass:"scoped-form",attrs:{"label-width":"120px","label-position":"left"}},[a("el-form-item",{attrs:{label:"姓名"}},[a("span",[t._v(t._s(t.info.managerName))])]),t._v(" "),a("el-form-item",{attrs:{label:"手机号"}},[a("span",[t._v(t._s(t.info.managerCellphone))])]),t._v(" "),t._l(t.info.departmentList,function(e){return a("el-form-item",{key:e.id,attrs:{label:"部门"}},[a("span",[t._v(t._s(e.name))]),t._v(" "),-1!==e.id?a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){t.handleRemoveDepartment(e)}}},[t._v("移除职位")]):t._e()],1)}),t._v(" "),t._l(t.departmentFormList,function(e){return a("el-form-item",{key:e.id,attrs:{label:"部门"}},[a("el-cascader",{attrs:{"expand-trigger":"hover",options:t.departmentList},model:{value:e.value,callback:function(t){e.value=t},expression:"department.value"}}),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){t.handleAddDepartment(e)}}},[t._v("保存")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){t.handleRemoveDepartmentForm(e)}}},[t._v("取消")])],1)}),t._v(" "),a("el-form-item",[void 0===t.info.departmentList[0]||-1!==t.info.departmentList[0].id?a("el-button",{attrs:{size:"small"},on:{click:t.handleAddDepartmentForm}},[t._v("添加部门")]):t._e(),t._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:t.handleCancel}},[t._v("返回")])],1)],2)],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contain-title"},[a("span",[t._v("分配部门")])])}]}},389:function(t,e,a){function n(t){a(1077)}var r=a(65)(a(900),a(1261),n,"data-v-6f281201",null);t.exports=r.exports},900:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{info:{managerName:"",managerCellphone:"",departmentList:[]},departmentList:[],departmentFormList:[]}},methods:{handleAddDepartmentForm:function(){this.departmentFormList.push({id:Date.now(),value:[]})},handleRemoveDepartmentForm:function(t){var e=this.departmentFormList.indexOf(t);-1!==e&&this.departmentFormList.splice(e,1)},handleAddDepartment:function(t){var e=this,a=t.value;0!==a.length?1===a.length&&-1===a[0]?this.$http({url:"/api/manageSystem/system/manager/manager/setAsParkManager",data:{managerId:this.$route.query.id},method:"post"}).then(function(t){"00000"===t.data.code&&(e.info.departmentList=[],e.departmentFormList=[],e.info.departmentList.push({id:-1,name:"园区经理"}))}).catch(function(t){console.log(t)}):this.$http({url:"/api/manageSystem/system/manager/manager/addManagerDepartment",data:{managerId:this.$route.query.id,departmentId:a[0],jobId:a[1]},method:"post"}).then(function(a){"00000"===a.data.code&&(e.departmentFormList.splice(e.departmentFormList.indexOf(t),1),e.info.departmentList.push({id:a.data.id,name:a.data.name}))}).catch(function(t){console.log(t)}):this.$alert("请选择部门与职位","提示",{confirmButtonText:"确定"})},handleRemoveDepartment:function(t){var e=this;this.$confirm("是否将该员工移出部门？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http({url:"/api/manageSystem/system/manager/manager/removeManagerDepartment",params:{id:t.id},method:"delete"}).then(function(a){"00000"===a.data.code&&e.info.departmentList.splice(e.info.departmentList.indexOf(t),1)}).catch(function(t){console.log(t)})})},handleCancel:function(){this.$router.push("/manageSystem/manager/manager")}},mounted:function(){var t=this;this.$http({url:"/api/manageSystem/system/manager/manager/getManagerInfo",params:{managerId:this.$route.query.id}}).then(function(e){"00000"===e.data.code&&(t.info.managerName=e.data.managerName,t.info.managerCellphone=e.data.managerCellphone,t.info.departmentList=e.data.departmentList,t.info.departmentList.forEach(function(e,a){0==e.isShow&&t.info.departmentList.splice(a,1)}))}).catch(function(t){console.log(t)}),this.$http({url:"/api/manageSystem/system/manager/manager/getSimpleDepartmentList"}).then(function(e){"00000"===e.data.code&&(t.departmentList=e.data.departmentList,!0===t.$store.state.isSuper&&t.departmentList.push({value:-1,label:"园区经理"}))}).catch(function(t){console.log(t)})}}}});