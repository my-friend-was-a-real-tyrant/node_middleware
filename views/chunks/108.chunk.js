webpackJsonp([108],{1067:function(t,e){},1252:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"questionnaire"}},[a("div",{staticClass:"topNav"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"关键字："}},[a("el-input",{attrs:{placeholder:"请输入关键字",size:"small"},model:{value:t.formData.keywords,callback:function(e){t.formData.keywords=e},expression:"formData.keywords"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"时间："}},[a("el-date-picker",{attrs:{size:"small",type:"date",placeholder:"选择起始日期"},model:{value:t.formData.startDate,callback:function(e){t.formData.startDate=e},expression:"formData.startDate"}}),t._v(" "),a("span",[t._v("--")]),t._v(" "),a("el-date-picker",{attrs:{size:"small",type:"date",placeholder:"选择结束日期"},model:{value:t.formData.endDate,callback:function(e){t.formData.endDate=e},expression:"formData.endDate"}})],1),t._v(" "),a("el-form-item",[a("el-button",{staticClass:"el-icon-search",attrs:{type:"primary",size:"small"},on:{click:t.Query}},[t._v("查询")])],1),t._v(" "),a("el-form-item",[a("el-button",{staticClass:"el-icon-plus",attrs:{type:"success",size:"small"},on:{click:t.Add}},[t._v("添加")])],1)],1)],1),t._v(" "),a("div",{staticClass:"table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",border:"",data:t.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"60",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"title",label:"标题","min-width":"200",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"封面图片",width:"110",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticClass:"image",attrs:{src:t.row.image,alt:""}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"groupType",label:"针对版本","min-width":"80",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"上线/下线","min-width":"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:e.row.isShow?"success":"danger"}},[t._v(t._s(e.row.isShow?"上线":"下线"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"createDatetime",label:"创建时间","min-width":"150",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"endDatetime",label:"结束时间","min-width":"150",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"358",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){t.Exit(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(a){t.Detail(e.row)}}},[t._v("详情")]),t._v(" "),e.row.isShow?a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){t.OutLine(e.row)}}},[t._v("下线")]):a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(a){t.OnLine(e.row)}}},[t._v("上线")]),t._v(" "),a("el-button",{attrs:{type:"info",size:"small"},on:{click:function(a){t.CheckList(e.row)}}},[t._v("列表")]),t._v(" "),a("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(a){t.LookCensus(e.row)}}},[t._v("统计")]),t._v(" "),a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(a){t.Export(e.row)}}},[t._v("导出")])]}}])})],1),t._v(" "),a("div",{staticStyle:{"padding-top":"20px"}},[a("el-pagination",{staticClass:"fr",attrs:{layout:"total, prev, pager, next, jumper","current-page":t.pageData.currentPage,total:t.pageData.totalSize,"page-size":t.pageData.pageSize},on:{"current-change":t.handleCurrentChange}})],1)],1)])},staticRenderFns:[]}},407:function(t,e,a){function n(t){a(1067)}var s=a(65)(a(919),a(1252),n,null,null);t.exports=s.exports},919:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(36),s=function(t){return t&&t.__esModule?t:{default:t}}(n);e.default={data:function(){return{tableData:[],pageData:{currentPage:1,totalSize:0,pageSize:10},formData:{keywords:"",startDate:"",endDate:""}}},mounted:function(){this.Get()},methods:{Query:function(){this.Get()},Add:function(){this.$router.push({path:"/manageSystem/property/addquestionnaire",query:{type:1}})},handleCurrentChange:function(t){this.pageData.currentPage=t,this.Get()},Exit:function(t){this.$router.push({path:"/manageSystem/property/addquestionnaire",query:{id:t.id,type:2}})},Detail:function(t){this.$router.push({path:"/manageSystem/property/questionnairedetail",query:{id:t.id}})},OutLine:function(t){var e=this;this.$confirm("此操作将会将该问卷下线, 是否继续?","消息提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http({url:"/api/manageSystem/system/property/questionnaire/downlineQuestionnaire",method:"patch",data:{id:t.id,isShow:!1}}).then(function(t){"00000"===t.data.code?(e.$message({type:"success",message:"操作成功"}),e.Get()):e.$message({type:"danger",message:"操作失败"})}).catch(function(t){e.$message({type:"danger",message:"操作失败"})})}).catch(function(){})},OnLine:function(t){var e=this;this.$http({url:"/api/manageSystem/system/property/questionnaire/downlineQuestionnaire",method:"patch",data:{id:t.id,isShow:!0}}).then(function(t){"00000"===t.data.code?(e.$message({type:"success",message:"操作成功"}),e.Get()):e.$message({type:"danger",message:"操作失败"})}).catch(function(t){e.$message({type:"danger",message:"操作失败"})})},CheckList:function(t){this.$router.push({path:"/manageSystem/property/questionnairesubmitlist",query:{id:t.id}})},LookCensus:function(t){this.$router.push({path:"/manageSystem/property/questionnairecensus",query:{id:t.id}})},Export:function(t){var e=this;this.$http({url:"/api/manageSystem/system/property/questionnaire/exportUnsatisfactory?id="+t.id,method:"get"}).then(function(t){"00000"===t.data.code&&(e.$message({type:"success",message:"操作成功"}),window.location.href=t.data.path)}).catch(function(t){})},Get:function(){var t=this,e={pageNo:this.pageData.currentPage,pageSize:this.pageData.pageSize};Boolean(this.formData.keywords)?e.keywords=this.formData.keywords:e.keywords="",Boolean(this.formData.startDate)?e.startDate=this.ParseTime(this.formData.startDate,"{y}-{m}-{d}"):e.startDate="",Boolean(this.formData.endDate)?e.endDate=this.ParseTime(this.formData.endDate,"{y}-{m}-{d}"):e.endDate="",this.$http({url:"/api/manageSystem/system/property/auestionnaire/getQuestionnaireList",params:e}).then(function(e){if("00000"===e.data.code){var a=e.data;t.pageData.totalSize=a.count,t.tableData=a.questionnaireList}}).catch(function(t){})},ParseTime:function(t,e){if(0===arguments.length)return null;var a=e||"{y}-{m}-{d} {h}:{i}:{s}",n=void 0;"object"===(void 0===t?"undefined":(0,s.default)(t))?n=t:(10===(""+t).length&&(t=1e3*parseInt(t)),n=new Date(t));var i={y:n.getFullYear(),m:n.getMonth()+1,d:n.getDate(),h:n.getHours(),i:n.getMinutes(),s:n.getSeconds(),a:n.getDay()};return a.replace(/{(y|m|d|h|i|s|a)+}/g,function(t,e){0==i.a&&(i.a=7);var a=i[e];return"a"===e?["星期一","星期二","星期三","星期四","星期五","星期六","星期日"][a-1]:(t.length>0&&a<10&&(a="0"+a),a||0)})}}}}});