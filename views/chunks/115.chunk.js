webpackJsonp([115],{1010:function(e,t){},1187:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"contain-main"},[e._m(0),e._v(" "),a("el-form",{ref:"formData",staticClass:"scoped-form",attrs:{model:e.formData,rules:e.formRules,"label-width":"130px","label-position":"left",inline:""}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"联系人：",prop:"contact"}},[a("el-input",{attrs:{size:"small"},model:{value:e.formData.contact,callback:function(t){e.formData.contact=t},expression:"formData.contact"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"联系方式：",required:"",prop:"cellphone"}},[a("el-input",{attrs:{size:"small"},model:{value:e.formData.cellphone,callback:function(t){e.formData.cellphone=t},expression:"formData.cellphone"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"标题：",prop:"title"}},[a("el-input",{attrs:{size:"small",maxlength:45},model:{value:e.formData.title,callback:function(t){e.formData.title=t},expression:"formData.title"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"内容：",prop:"content"}},[a("el-input",{attrs:{type:"textarea",size:"small",autosize:{minRows:3},maxlength:500},model:{value:e.formData.content,callback:function(t){e.formData.content=t},expression:"formData.content"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"上传图片：",prop:"imgList"}},[a("el-upload",{ref:"uploadImg",attrs:{action:"/v1/file","list-type":"picture-card",name:"file",accept:"image/*",data:{uploadType:5,fileSuffixType:1},"on-success":e.handleFileUpload,"on-preview":e.handlePictureCardPreview,"on-change":e.handleImgChange,"on-remove":e.handleImgChange,"before-upload":e.handleCheckImgLength}},[a("i",{staticClass:"el-icon-plus"},[a("span",{staticClass:"description"},[e._v("最多上传9张图片")])])])],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:" "}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleAddAnnouncement}},[e._v("确定")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.handleReturn}},[e._v("返回")])],1)],1),e._v(" "),a("el-dialog",{attrs:{size:"tiny"},model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"contain-title"},[a("span",[e._v("添加公告")])])}]}},396:function(e,t,a){function l(e){a(1010)}var n=a(65)(a(908),a(1187),l,"data-v-0dd7090a",null);e.exports=n.exports},908:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{dialogVisible:!1,dialogImageUrl:"",formData:{contact:"",cellphone:"",title:"",content:"",imgList:[]},formRules:{contact:[{required:!0,message:"请输入联系人",trigger:"blur"}],cellphone:[{validator:function(e,t,a){if(""===t)a(new Error("请输入联系方式"));else{!1===/^1(([3,8]\d)|(5[0-3,5-9])|(47)|(7[5-8]))(\d{8})$/.test(t)?a(new Error("请输入正确的手机号")):a()}},trigger:"blur"}],title:[{required:!0,message:"请输入标题",trigger:"blur"}],content:[{required:!0,message:"请输入内容",trigger:"blur"}]}}},methods:{handleFileUpload:function(e,t,a){if(1e4!==e.code||1e4!==e.returnData.subCode)if("E0004"===e.code)this.$router.push("/manageSystem/login");else{this.$alert(e.message,"提示",{confirmButtonText:"确定"});for(var l=0;l<a.length;l++)if(a[l]===t){a.splice(l,1);break}}},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleImgChange:function(e,t){for(var a=[],l=0;l<t.length;l++)!0===Object.prototype.hasOwnProperty.call(t[l],"response")&&a.push(t[l].response.returnData.data.filePath);this.formData.imgList=a},handleCheckImgLength:function(e){return!1===/(.(jpg|gif|jpeg|png))+$/i.test(e.name)?(this.$alert("请上传正确格式的图片","提示"),!1):this.$refs.uploadImg.uploadFiles.length>9?(this.$alert("限上传九张图片","提示"),!1):void 0},handleReturn:function(){this.$router.push("/manageSystem/property/announcement")},handleAddAnnouncement:function(){var e=this;this.$refs.formData.validate(function(t){if(!t)return!1;e.$http({url:"/api/manageSystem/system/property/announcement/addAnnouncement",method:"post",data:e.formData}).then(function(t){"00000"===t.data.code&&(e.$message("添加成功"),e.$router.push("/manageSystem/property/announcement"))}).catch(function(e){console.log(e)})})}}}}});