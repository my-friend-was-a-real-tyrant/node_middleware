webpackJsonp([79],{1022:function(t,a){},1023:function(t,a){},1201:function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"pay"},[e("div",{staticClass:"pay-head"},[e("div",{staticClass:"pay-head-title"},[t._v("\n      缴费管理\n    ")]),t._v(" "),e("div",{staticClass:"pay-head-time"},[e("div",{staticClass:"pay-head-time-rule"},[t._v("\n        支付规则：\n      ")]),t._v(" "),e("div",{staticClass:"pay-head-time-t"},[e("el-radio-group",{on:{change:t.savePayrule},model:{value:t.radio2,callback:function(a){t.radio2=a},expression:"radio2"}},[e("el-radio",{attrs:{label:1}},[t._v("月份")]),t._v(" "),e("el-radio",{attrs:{label:4}},[t._v("年份")])],1)],1)])]),t._v(" "),e("div",{staticClass:"pay-history"},[e("div",{staticClass:"pay-history-head"},[e("div",{staticClass:"pay-history-head-title"},[t._v("\n        缴费记录\n      ")]),t._v(" "),e("div",{staticClass:"pay-history-head-search"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.keywords,expression:"keywords"}],attrs:{type:"text"},domProps:{value:t.keywords},on:{keyup:function(a){if(!("button"in a)&&13!==a.keyCode)return null;t.search(a)},input:function(a){a.target.composing||(t.keywords=a.target.value)}}}),t._v(" "),e("i",{staticClass:"el-icon-search",on:{click:t.search}})])]),t._v(" "),e("div",{staticClass:"pay-history-flex"},[e("div",{staticClass:"pay-history-tab"},[e("span",{staticClass:"pay-history-tab-propay",class:[1===t.page?"bluecolor":"greycolor"],on:{click:t.propay}},[t._v("物业费")]),t._v(" "),e("span",{staticClass:"pay-history-tab-waterpay",class:[2===t.page?"bluecolorright":"greycolorR"],on:{click:t.waterpay}},[t._v("水电费")])]),t._v(" "),e("div",{staticClass:"pay-history-btn"},[e("el-button",{attrs:{type:"primary"},on:{click:function(a){t.ouputDia=!0}}},[t._v("导出全部")]),t._v(" "),e("el-button",{directives:[{name:"permit",rawName:"v-permit",value:402,expression:"402"}],staticClass:"import-wrapper",attrs:{type:"primary"}},[e("span",[t._v("导入")]),t._v(" "),e("form",{attrs:{id:"import-form"}},[e("input",{staticClass:"import",attrs:{type:"file",accept:"application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",id:"import"},on:{change:t.handleUploadExcel}})])]),t._v(" "),e("el-button",{on:{click:t.downTemplate}},[t._v("模板下载")])],1)]),t._v(" "),1===t.page?e("div",{staticClass:"pay-history-table"},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:""}},[e("el-table-column",{attrs:{prop:"roomProperty",label:"房屋性质"}}),t._v(" "),e("el-table-column",{attrs:{prop:"roomSimpleName",label:"房间号"}}),t._v(" "),e("el-table-column",{attrs:{prop:"houseHolder",label:"户主"}}),t._v(" "),e("el-table-column",{attrs:{prop:"mobile",label:"联系方式"}}),t._v(" "),e("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"pay-history-table-operate",on:{click:function(e){t.ouputDia=!0,t.roomId=a.row.roomId}}},[t._v("导出")]),e("span",{staticClass:"pay-history-table-line"},[t._v("|")]),e("span",{staticClass:"pay-history-table-operate",on:{click:function(e){t.goDetail(a.row.roomId)}}},[t._v("明细")])]}}])})],1)],1):e("div",{staticClass:"pay-history-table"},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableDataWater,stripe:""}},[e("el-table-column",{attrs:{prop:"roomSimpleName",label:"房间号"}}),t._v(" "),e("el-table-column",{attrs:{prop:"houseHolder",label:"户主"}}),t._v(" "),e("el-table-column",{attrs:{prop:"mobile",label:"联系方式"}}),t._v(" "),e("el-table-column",{attrs:{prop:"notPay",label:"未付金额"}}),t._v(" "),e("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"pay-history-table-operate",on:{click:function(e){t.ouputDia=!0,t.roomId=a.row.roomId}}},[t._v("导出")]),e("span",{staticClass:"pay-history-table-line"},[t._v("|")]),e("span",{staticClass:"pay-history-table-operate",on:{click:function(e){t.goDetail(a.row.roomId)}}},[t._v("明细")])]}}])})],1)],1),t._v(" "),e("div",{staticClass:"pay-history-page"},[e("el-pagination",{attrs:{"current-page":t.pageData.currentPage,"page-sizes":[10,20,50,100],"page-size":t.pageData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.pageData.totalSize},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.ouputDia,expression:"ouputDia"}],staticClass:"pay-outputDialog"},[e("div",{staticClass:"pay-outputDialog-con"},[e("div",{staticClass:"pay-outputDialog-con-title"},[t._v("\n        请选择年份\n      ")]),t._v(" "),e("div",{staticClass:"dialogblock"},[e("span",{staticClass:"demonstration"},[t._v("年份：")]),t._v(" "),e("el-date-picker",{attrs:{align:"right",type:"year",placeholder:"选择年"},model:{value:t.year,callback:function(a){t.year=a},expression:"year"}})],1),t._v(" "),e("div",{staticClass:"pay-outputDialog-con-btn"},[e("el-button",{attrs:{type:"primary"},on:{click:t.sureOutpot}},[t._v("确定")]),t._v(" "),e("el-button",{attrs:{type:"danger"},on:{click:t.cancel}},[t._v("取消")])],1)])])])},staticRenderFns:[]}},404:function(t,a,e){function o(t){e(1022),e(1023)}var s=e(65)(e(916),e(1201),o,"data-v-283108a8",null);t.exports=s.exports},916:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default={data:function(){return{excelUrl:"",radio2:"",id:"",keywords:"",roomId:"",page:1,year:"2018",tableData:[],tableDataWater:[],pageData:{currentPage:1,totalSize:0,pageSize:10},ouputDia:!1}},methods:{search:function(t){this.pageData.currentPage=1,t.target.blur(),this.ajaxFun()},propay:function(){1!=this.page&&(this.page=1,this.keywords="",this.getPropertyList())},waterpay:function(){2!=this.page&&(this.page=2,this.keywords="",this.getWaterList())},sureOutpot:function(){var t=this,a="";this.roomId?(a=1==this.page?"/api/manageSystem/system/property/payment/downPropertySin":"/api/manageSystem/system/property/payment/downWaterSin",this.$http({url:a,method:"post",data:{year:this.year,roomId:this.roomId}}).then(function(a){"00000"===a.data.code&&(window.open(a.data.data.returnData),t.ouputDia=!1,t.roomId="")}).catch(function(t){console.log(t)})):(a=1==this.page?"/api/manageSystem/system/property/payment/downPropertyAll":"/api/manageSystem/system/property/payment/downWaterAll",this.$http({url:a,method:"post",data:{year:this.year}}).then(function(a){"00000"===a.data.code&&(console.log(a.data.data.returnData),window.open(a.data.data.returnData),t.ouputDia=!1,t.roomId="")}).catch(function(t){console.log(t)}))},cancel:function(){this.ouputDia=!1,this.roomId=""},handleSizeChange:function(t){this.pageData.pageSize=t},handleCurrentChange:function(t){this.pageData.currentPage=t},ajaxFun:function(){1===this.page?this.getPropertyList():this.getWaterList()},goDetail:function(t){1===this.page?this.$router.push({path:"/manageSystem/property/payment/propertyDetail",query:{roomId:t}}):this.$router.push({path:"/manageSystem/property/payment/waterDetail",query:{roomId:t}})},handleUploadExcel:function(){var t=this;if(!1===/(.(xls|xlsx))+$/i.test(document.getElementById("import").files[0].name))return this.$alert("请导入文件类型为excel格式的表格文件。","提示"),!1;var a=new FormData;a.append("file",document.getElementById("import").files[0]),a.append("uploadType",21),this.$http({url:"/v1/file",method:"post",data:a}).then(function(a){document.getElementById("import-form").reset(),1e4===a.data.code&&1e4===a.data.returnData.subCode&&(t.excelUrl=a.data.returnData.data.filePath,t.handleImportRoom())}).catch(function(t){console.log(t)})},handleImportRoom:function(){var t=this,a="";a=1===this.page?"/api/manageSystem/system/property/payment/importPropertyList":"/api/manageSystem/system/property/payment/importWaterList",this.$http({url:a,method:"post",data:{filePath:this.excelUrl}}).then(function(a){"00000"===a.data.code&&(t.$message({message:"导入成功",type:"success"}),t.ajaxFun())}).catch(function(t){console.log(t)})},getWaterList:function(){var t=this;this.$http({url:"/api/manageSystem/system/property/payment/getWaterList",methods:"get",params:{pageNo:this.pageData.currentPage,pageSize:this.pageData.pageSize,keywords:this.keywords}}).then(function(a){1e4===a.data.data.code&&(t.tableDataWater=a.data.data.returnData.list,t.pageData.totalSize=a.data.data.returnData.total)}).catch(function(t){console.log(t)})},getPropertyList:function(){var t=this;this.$http({url:"/api/manageSystem/system/property/payment/getPropertyList",methods:"get",params:{pageNo:this.pageData.currentPage,pageSize:this.pageData.pageSize,keywords:this.keywords}}).then(function(a){1e4===a.data.data.code&&(t.tableData=a.data.data.returnData.list,t.pageData.totalSize=a.data.data.returnData.total)}).catch(function(t){console.log(t)})},savePayrule:function(){this.$http({url:"/api/manageSystem/system/property/payment/payRulesave",method:"post",data:{payType:this.radio2,id:this.id}}).then(function(t){}).catch(function(t){console.log(t)})},downTemplate:function(){this.$http({url:"/api/manageSystem/system/property/payment/downTemplate",method:"post",data:{templateId:this.page}}).then(function(t){"00000"===t.data.code&&(console.log(t.data.data.returnData),window.open(t.data.data.returnData))}).catch(function(t){console.log(t)})}},mounted:function(){var t=this;this.getPropertyList(),this.$http({url:"/api/manageSystem/system/property/payment/payRuleinit",methods:"get"}).then(function(a){1e4===a.data.data.code&&(t.radio2=a.data.data.returnData.payType,t.id=a.data.data.returnData.id)}).catch(function(t){console.log(t)})},computed:{},watch:{"pageData.currentPage":function(){this.ajaxFun()},"pageData.pageSize":function(){this.ajaxFun()}}}}});