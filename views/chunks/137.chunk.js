webpackJsonp([137],{1309:function(a,t){a.exports={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"contain-main"},[e("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[e("el-form-item",{attrs:{label:"关键字"}},[e("el-input",{attrs:{size:"small"},model:{value:a.formData.keywords,callback:function(t){a.formData.keywords=t},expression:"formData.keywords"}})],1),a._v(" "),e("el-input",{staticClass:"displayNone"}),a._v(" "),e("el-form-item",[e("el-button",{attrs:{type:"primary",icon:"search",size:"small"},on:{click:a.searchFun}},[a._v("搜索")])],1),a._v(" "),e("el-form-item",[e("el-button",{attrs:{type:"primary",size:"small"},on:{click:a.handleAddParkShow}},[a._v("添加园区")])],1)],1),a._v(" "),e("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:a.tableData}},[e("el-table-column",{attrs:{prop:"id",label:"ID","min-width":"200"}}),a._v(" "),e("el-table-column",{attrs:{prop:"cityName",label:"所在城市","min-width":"200"}}),a._v(" "),e("el-table-column",{attrs:{prop:"name",label:"园区名","min-width":"150"}}),a._v(" "),e("el-table-column",{attrs:{prop:"address",label:"地址","min-width":"150"}})],1),a._v(" "),e("div",[e("div",{staticClass:"contain-bottom-pagination"},[e("el-pagination",{staticClass:"fr",attrs:{layout:"sizes, total, prev, pager, next, jumper","current-page":a.pageData.currentPage,total:a.pageData.totalSize,"page-sizes":[10,20,50,100],"page-size":a.pageData.pageSize},on:{"size-change":a.handleSizeChange,"current-change":a.handleCurrentChange}})],1)]),a._v(" "),e("el-dialog",{attrs:{title:"添加园区",visible:a.dialogFormVisible},on:{"update:visible":function(t){a.dialogFormVisible=t}}},[e("el-form",{ref:"addParkForm",attrs:{rules:a.addParkFormRules,model:a.addParkForm,"label-width":"100px","label-position":"left"}},[e("el-form-item",{attrs:{label:"园区名称",prop:"name"}},[e("el-input",{attrs:{"auto-complete":"off"},model:{value:a.addParkForm.name,callback:function(t){a.addParkForm.name=t},expression:"addParkForm.name"}})],1),a._v(" "),e("el-form-item",{attrs:{label:"所属地区",prop:"districtId"}},[e("el-cascader",{style:{width:"100%"},attrs:{options:a.cascaderOptions},on:{"active-item-change":a.handleCascaderItemChange,change:a.handleCascaderChange}})],1),a._v(" "),e("el-form-item",{attrs:{label:"详细地址",prop:"address"}},[e("el-input",{attrs:{"auto-complete":"off"},model:{value:a.addParkForm.address,callback:function(t){a.addParkForm.address=t},expression:"addParkForm.address"}})],1)],1),a._v(" "),e("div",{staticClass:"dialog-footer",slot:"footer"},[e("el-button",{on:{click:a.handleAddParkShowOff}},[a._v("取 消")]),a._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:a.handleSubmitAddPark}},[a._v("确 定")])],1)],1)],1)},staticRenderFns:[]}},425:function(a,t,e){var r=e(65)(e(937),e(1309),null,null,null);a.exports=r.exports},937:function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{formData:{keywords:""},sendData:{keywords:""},tableData:[],pageData:{currentPage:void 0!==this.$route.query.currentPage?parseInt(this.$route.query.currentPage):1,totalSize:1,pageSize:10},dialogFormVisible:!1,addParkForm:{name:"",districtId:"",address:""},addParkFormRules:{name:[{required:!0,trigger:"change",message:"请输入园区名称"}],districtId:[{required:!0,type:"number",trigger:"change",message:"请选择园区所在地区"}],address:[{required:!0,trigger:"change",message:"请输入园区详细地址"}]},cascaderOptions:[]}},methods:{watchQueryFun:function(){this.$route.query.currentPage?this.pageData.currentPage=parseInt(this.$route.query.currentPage):this.pageData.currentPage=1,this.ajaxFun()},ajaxFun:function(){var a=this;this.$http({url:"/api/manageSystem/system/system/park/getParkList",params:{keywords:this.sendData.keywords,pageNo:this.pageData.currentPage,pageSize:this.pageData.pageSize}}).then(function(t){"00000"===t.data.code&&(a.pageData.totalSize=t.data.count,a.tableData=t.data.parkList)}).catch(function(a){console.log(a)})},handleSizeChange:function(a){this.pageData.pageSize=a,this.$route.query.currentPage?this.$router.push({path:"/manageSystem/system/park"}):this.$router.push({path:"/manageSystem/system/park",query:{currentPage:1}})},handleCurrentChange:function(a){this.$router.push({path:"/manageSystem/system/park",query:{currentPage:a}})},searchFun:function(){this.sendData.keywords=this.formData.keywords,this.$route.query.currentPage?this.$router.push({path:"/manageSystem/system/park"}):this.$router.push({path:"/manageSystem/system/park",query:{currentPage:1}})},handleAddParkShow:function(){var a=this;this.$http("/api/common/getProvinceList").then(function(t){for(var e=0;e<t.data.provinceList.length;e++){var r={label:t.data.provinceList[e].provinceName,value:t.data.provinceList[e].provinceId,children:[]};a.cascaderOptions.push(r)}a.dialogFormVisible=!0}).catch(function(a){console.log(a)})},handleAddParkShowOff:function(){this.dialogFormVisible=!1},handleCascaderItemChange:function(a){var t=this;if(1===a.length){for(var e=0,r=0;r<this.cascaderOptions.length;r++)if(a[0]===this.cascaderOptions[r].value){e=r;break}0===this.cascaderOptions[e].children.length&&this.$http({url:"/api/common/getCityList",params:{provinceId:this.cascaderOptions[e].value}}).then(function(a){for(var r=0;r<a.data.cityList.length;r++){var i={label:a.data.cityList[r].cityName,value:a.data.cityList[r].cityId,children:[]};t.cascaderOptions[e].children.push(i)}}).catch(function(a){console.log(a)})}else{for(var i=0,s=0,n=0;n<this.cascaderOptions.length;n++)if(a[0]===this.cascaderOptions[n].value){i=n;for(var o=0;o<this.cascaderOptions[n].children.length;o++)if(a[1]===this.cascaderOptions[n].children[o].value){s=o;break}break}0===this.cascaderOptions[i].children[s].children.length&&this.$http({url:"/api/common/getDistrictList",params:{cityId:this.cascaderOptions[i].children[s].value}}).then(function(a){for(var e=0;e<a.data.districtList.length;e++){var r={label:a.data.districtList[e].districtName,value:a.data.districtList[e].districtId};t.cascaderOptions[i].children[s].children.push(r)}}).catch(function(a){console.log(a)})}},handleCascaderChange:function(a){this.addParkForm.districtId=a[2]},handleSubmitAddPark:function(){var a=this;this.$refs.addParkForm.validate(function(t){if(!t)return!1;a.$http({url:"/api/manageSystem/system/system/park/addPark",method:"post",data:{name:a.addParkForm.name,address:a.addParkForm.address,districtId:a.addParkForm.districtId}}).then(function(t){"00000"===t.data.code&&(a.handleAddParkShowOff(),a.searchFun())}).catch(function(a){console.log(a)})})}},mounted:function(){this.watchQueryFun()},watch:{"$route.query.currentPage":function(){this.watchQueryFun()}}}}});