webpackJsonp([101],{1003:function(t,e){},1180:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contain-main"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"关键字"}},[a("el-input",{attrs:{size:"small"},model:{value:t.formData.keywords,callback:function(e){t.formData.keywords=e},expression:"formData.keywords"}})],1),t._v(" "),a("el-input",{staticClass:"displayNone"}),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"search",size:"small"},on:{click:t.searchFun}},[t._v("搜索")])],1),t._v(" "),a("el-form-item",[a("el-button",{directives:[{name:"permit",rawName:"v-permit",value:402,expression:"402"}],staticClass:"import-wrapper",attrs:{size:"small",type:"primary"}},[a("span",[t._v("导入房屋列表")]),t._v(" "),a("form",{attrs:{id:"import-form"}},[a("input",{staticClass:"import",attrs:{type:"file",accept:"application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",id:"import"},on:{change:t.handleUploadExcel}})])])],1),t._v(" "),a("el-form-item",[a("el-button",{directives:[{name:"permit",rawName:"v-permit",value:402,expression:"402"}],staticClass:"import-wrapper",attrs:{size:"small",type:"primary"},on:{click:t.exportRoom}},[t._v("\n                导出房屋列表\n            ")])],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.downTemplate}},[t._v("下载模板")])],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:t.tableData}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.memberList,function(e){return a("el-row",{key:e.cellphone,staticClass:"scoped-expand"},[a("el-col",{attrs:{span:4}},[t._v("身份："+t._s(1===e.identity?"户主":(2===e.identity?"家属":"租户")+(e.isResponsible?"(代理人)":"")))]),t._v(" "),a("el-col",{attrs:{span:3}},[t._v("姓名："+t._s(e.realName))]),t._v(" "),a("el-col",{attrs:{span:5}},[t._v("联系方式："+t._s(e.cellphone))]),t._v(" "),a("el-col",{attrs:{span:3}},[t._v("性别："+t._s(1===e.sex?"男":2===e.sex?"女":"保密"))]),t._v(" "),a("el-col",{attrs:{span:5}},[t._v("出生日期："+t._s(e.birthday))])],1)})}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"management",label:"管理处","min-width":"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"roomProperty",label:"房屋性质","min-width":"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"buildingName",label:"楼栋","min-width":"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"unitName",label:"单元","min-width":"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"roomCode",label:"房号","min-width":"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"proprietorName",label:"户主","min-width":"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cellphone",label:"联系方式","min-width":"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"edit",label:"操作","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){t.editRoom(e.row)}}},[t._v("编辑")])]}}])})],1),t._v(" "),a("div",[a("div",{staticClass:"contain-bottom-pagination"},[a("el-pagination",{staticClass:"fr",attrs:{layout:"total, prev, pager, next, jumper","current-page":t.pageData.currentPage,total:t.pageData.totalSize,"page-size":t.pageData.pageSize},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)]),t._v(" "),a("el-dialog",{attrs:{size:"tiny",top:"32%",title:"编辑信息 :",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.form}},[a("el-form-item",{staticClass:"contain-el-editMessage",attrs:{label:"户主姓名 :","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.name,callback:function(e){t.form.name=e},expression:"form.name"}})],1),t._v(" "),a("el-form-item",{staticClass:"contain-el-editMessage",attrs:{label:"联系方式 :","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.call,callback:function(e){t.form.call=e},expression:"form.call"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.containSureSubmit}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]}},416:function(t,e,a){function o(t){a(1003)}var r=a(65)(a(928),a(1180),o,"data-v-03d3a2b6",null);t.exports=r.exports},928:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){void 0!==this.$route.query.currentPage&&parseInt(this.$route.query.currentPage);return{excelUrl:"",formData:{keywords:""},sendData:{keywords:""},tableData:[],pageData:{currentPage:1,totalSize:1,pageSize:15},dialogTableVisible:!1,dialogFormVisible:!1,form:{name:"",call:"",roomId:""},formLabelWidth:"80px",cellphoneReg:/^[1][2,3,4,5,6,7,8,9][0-9]{9}$/}},methods:{exportRoom:function(){var t=this;this.$http({url:"/api/manageSystem/system/property/room/outRoomList",method:"get",params:{keywords:""}}).then(function(e){"00000"===e.data.code&&(t.$alert("导出成功","提示"),window.open(e.data.path))}).catch(function(t){console.log(t)})},downTemplate:function(){this.$http({url:"/api/manageSystem/system/property/payment/downTemplate",method:"post",data:{templateId:3}}).then(function(t){"00000"===t.data.code&&window.open(t.data.data.returnData)}).catch(function(t){console.log(t)})},watchQueryFun:function(){this.$route.query.currentPage?this.pageData.currentPage=parseInt(this.$route.query.currentPage):this.pageData.currentPage=1,this.ajaxFun()},ajaxFun:function(){var t=this;this.$http({url:"/api/manageSystem/system/property/room/getRoomList",params:{keywords:this.sendData.keywords,pageNo:this.pageData.currentPage,pageSize:this.pageData.pageSize}}).then(function(e){"00000"===e.data.code&&(t.pageData.totalSize=e.data.count,t.tableData=e.data.roomList)}).catch(function(t){})},handleSizeChange:function(t){this.pageData.pageSize=t,this.$route.query.currentPage?this.$router.push({path:"/manageSystem/property/room"}):this.$router.push({path:"/manageSystem/property/room",query:{currentPage:1}})},handleCurrentChange:function(t){this.$router.push({path:"/manageSystem/property/room",query:{currentPage:t}})},searchFun:function(){this.sendData.keywords=this.formData.keywords,this.$route.query.currentPage?this.$router.push({path:"/manageSystem/property/room"}):this.$router.push({path:"/manageSystem/property/room",query:{currentPage:1}})},handleUploadExcel:function(){var t=this,e=document.getElementById("import").files[0],a=/(.(xls|xlsx))+$/i;if(console.log(e.name),!1===a.test(e.name))return this.$alert("请导入文件类型为excel格式的表格文件。","提示"),!1;var o=new FormData;o.append("file",document.getElementById("import").files[0]),o.append("uploadType",21),this.$http({url:"/v1/file",method:"post",data:o}).then(function(e){document.getElementById("import-form").reset(),1e4===e.data.code&&1e4===e.data.returnData.subCode&&(t.excelUrl=e.data.returnData.data.filePath,t.handleImportRoom())}).catch(function(t){})},handleImportRoom:function(){var t=this;this.$http({url:"/api/manageSystem/system/property/room/importRoomList",method:"post",data:{filePath:this.excelUrl}}).then(function(e){"00000"===e.data.code&&(t.$message({message:"导入成功",type:"success"}),t.searchFun())}).catch(function(t){})},editRoom:function(t){this.dialogFormVisible=!0,this.form.name=t.proprietorName,this.form.call=t.cellphone,this.form.roomId=t.roomId},containSureSubmit:function(t){var e=this;this.dialogFormVisible=!1,this.cellphoneReg.test(this.form.call)?this.$http({url:"/api/manageSystem/system/property/room/editHostInfo",method:"patch",data:{roomId:this.form.roomId,cellphone:this.form.call,name:this.form.name}}).then(function(t){"00000"===t.data.code&&e.ajaxFun()}):this.$confirm("你的手机号码格式错误").catch(function(t){})}},mounted:function(){this.watchQueryFun()},watch:{"$route.query.currentPage":function(){this.watchQueryFun()}}}}});