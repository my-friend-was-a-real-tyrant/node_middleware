webpackJsonp([73],{1026:function(t,e){},1206:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"userFunction"},[n("div",{staticClass:"userFunction-data"},[n("p",{staticClass:"fr"},[n("span",{staticClass:"userFunction-word",class:{"userFunction-link":2===t.linkType},on:{click:function(e){t.handleTypeChange(1)}}},[t._v("日")]),t._v(" "),n("span",{staticClass:"userFunction-word",class:{"userFunction-link":1===t.linkType},on:{click:function(e){t.handleTypeChange(2)}}},[t._v("月")]),t._v(" "),n("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:1===t.linkType,expression:"linkType === 1"}],attrs:{type:"date",size:"small",placeholder:"选择日期",clearable:!1},model:{value:t.dateTime,callback:function(e){t.dateTime=e},expression:"dateTime"}}),t._v(" "),n("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:2===t.linkType,expression:"linkType === 2"}],attrs:{type:"month",size:"small",placeholder:"选择月",clearable:!1},model:{value:t.month,callback:function(e){t.month=e},expression:"month"}})],1)]),t._v(" "),n("div",{staticClass:"userFunction-service"},t._l(t.userTab,function(e,a){return n("ul",{key:e,class:{tabOpacity:t.tabType===a},on:{click:function(e){t.userCreateChart(a)}}},[n("li",[t._v(t._s(e.title))]),t._v(" "),n("li",[t._v("使用次数 占比")]),t._v(" "),n("li",{class:{tabColor:t.tabType===a}},[n("span",[t._v(t._s(e.number))]),n("span",[t._v(t._s(e.percent)+"%")])])])})),t._v(" "),t._m(0)])},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"userFunction-chartDiv"},[n("ul",[n("li",[n("div",{staticClass:"userFunction-chartDiv-charts"})])])])}]}},428:function(t,e,n){function a(t){n(1026)}var i=n(65)(n(940),n(1206),a,"data-v-2b1e8aa2",null);t.exports=i.exports},785:function(t,e,n){"use strict";function a(t,e){if(""==t||null==t)return"";var n=new Date(t),a=n.getFullYear(),i=n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1,s=n.getDate()<10?"0"+n.getDate():n.getDate(),r=a+"-"+i+"-"+s,c=n.getHours()<10?"0"+n.getHours():n.getHours(),o=n.getMinutes()<10?"0"+n.getMinutes():n.getMinutes(),l=n.getSeconds()<10?"0"+n.getSeconds():n.getSeconds();return"datetime"===e?r=r+" "+c+":"+o+":"+l:"minute"===e&&(r=r+" "+c+":"+o),r}Object.defineProperty(e,"__esModule",{value:!0}),e.transition=a},940:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(785);e.default={data:function(){var t=new Date;return{linkType:1,month:new Date,tabType:0,xData:[],yData:[],chartsName:"",dateTime:t,userFunctionChart:"",userTab:[{title:"维修服务",number:0,percent:"0"},{title:"园区报事",number:0,percent:"0"},{title:"投诉表扬",number:0,percent:"0"},{title:"咨询建议",number:0,percent:"0"},{title:"园区活动",number:0,percent:"0"}]}},methods:{handleTypeChange:function(t){var e=this;this.linkType=t,this.$http({method:"get",url:"/api/manageSystem/system/user/functionStatistics/getFunctionStatistics",params:{type:this.linkType,date:1===this.linkType?(0,a.transition)(this.dateTime):(0,a.transition)(this.month)}}).then(function(t){if("00000"===t.data.code){var n=t.data.data;n.repairment.percent,e.userTab=[{title:"维修服务",number:n.repairment.count,percent:n.repairment.percent},{title:"园区报事",number:n.report.count,percent:n.report.percent},{title:"投诉表扬",number:n.complaint.count,percent:n.complaint.percent},{title:"咨询建议",number:n.suggestion.count,percent:n.suggestion.percent},{title:"园区活动",number:n.activity.count,percent:n.activity.percent}],e.userCreateChart(e.tabType)}}).catch(function(t){console.log(t)})},userCreateChart:function(t){var e=this;this.tabType=t;var n="";0===t?(n="getRepairmentCharts",this.chartsName="维修服务使用趋势"):1===t?(n="getReportCharts",this.chartsName="园区报事使用趋势"):2===t?(n="getComplaintCharts",this.chartsName="投诉表扬使用趋势"):3===t?(n="getSuggestionCharts",this.chartsName="咨询建议使用趋势"):4===t&&(n="getActivityCharts",this.chartsName="园区活动使用趋势"),this.$http({method:"get",url:"/api/manageSystem/system/user/functionStatistics/"+n,params:{type:this.linkType,date:1===this.linkType?(0,a.transition)(this.dateTime):(0,a.transition)(this.month)}}).then(function(t){"00000"===t.data.code&&e.userFunctionChart.setOption({title:{text:e.chartsName},xAxis:{data:t.data.data.xDate},series:[{data:t.data.data.yNum}]})}).catch(function(t){console.log(t)}),window.onresize=function(){e.userFunctionChart.resize()}}},mounted:function(){this.handleTypeChange(1);var t=document.querySelector(".userFunction-chartDiv-charts");this.userFunctionChart=this.$echarts.init(t);var e={title:{text:"",left:"1%",top:"5%",textStyle:{fontSize:16,color:"#999999"}},tooltip:{formatter:"{a}<br /> 时间: {b} 数量: {c}"},grid:[{x:"5%",y:"20%",width:"90%",height:"70%"}],xAxis:{data:this.xData,nameGap:30,axisPointer:{show:!0,label:{show:!0}},axisTick:{show:!1},axisLabel:{textStyle:{fontSize:14}}},yAxis:{type:"value",nameGap:20,axisTick:{show:!1},axisLabel:{textStyle:{fontSize:16}},minInterval:1},series:[{name:"维修服务",type:"line",data:this.yData,symbolSize:5,itemStyle:{normal:{color:"#333333"}},lineStyle:{normal:{color:"#5793f3",width:2}}}]};this.userFunctionChart.setOption(e)},watch:{dateTime:function(){1===this.linkType&&this.handleTypeChange(1)},month:function(){2===this.linkType&&this.handleTypeChange(2)}}}}});