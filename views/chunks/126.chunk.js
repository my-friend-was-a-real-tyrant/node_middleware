webpackJsonp([126],{1124:function(e,t){},1313:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"contain-main"},[e._m(0),e._v(" "),a("el-form",{ref:"formData",staticClass:"scoped-form",attrs:{rules:e.formRules,model:e.formData,"label-width":"120px","label-position":"left"}},[a("el-form-item",{attrs:{label:"部门",prop:"departmentName"}},[a("el-input",{model:{value:e.formData.departmentName,callback:function(t){e.formData.departmentName=t},expression:"formData.departmentName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述",prop:"description"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:3},maxlength:500},model:{value:e.formData.description,callback:function(t){e.formData.description=t},expression:"formData.description"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"权限",prop:"permissions"}},[a("el-checkbox-group",{model:{value:e.formData.permissions,callback:function(t){e.formData.permissions=t},expression:"formData.permissions"}},e._l(e.permissionsData,function(t){return-1!=t.id?a("div",{key:t.id},[t.children?a("div",[a("span",{staticClass:"scoped-permissions"},[e._v(e._s(t.name))]),e._v(" "),e._l(t.children,function(t){return a("el-checkbox",{key:t.id,attrs:{name:"permissions",label:t.id}},[e._v(e._s(t.name))])})],2):a("el-checkbox",{attrs:{name:"permissions",label:t.id}},[e._v(e._s(t.name))])],1):e._e()}))],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleSubmit}},[e._v("提交")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:e.handleCancel}},[e._v("返回")])],1)],1)],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"contain-title"},[a("span",[e._v("编辑部门")])])}]}},384:function(e,t,a){function n(e){a(1124)}var r=a(65)(a(895),a(1313),n,"data-v-e470e372",null);e.exports=r.exports},895:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){var e=this;return{formData:{departmentName:"",description:"",permissions:[]},formRules:{departmentName:[{required:!0,trigger:"blur",message:"请输入部门名称"}],permissions:[{validator:function(t,a,n){0===e.formData.permissions.length?n(new Error("请选择管理员权限")):n()},trigger:"blur"}]},permissionsData:[]}},methods:{handleSubmit:function(){var e=this;this.$refs.formData.validate(function(t){if(!t)return!1;e.$http({url:"/api/manageSystem/system/manager/department/editDepartment",method:"post",data:{id:e.$route.query.id,departmentName:e.formData.departmentName,description:e.formData.description,permissions:e.formData.permissions}}).then(function(t){"00000"===t.data.code&&(e.$message("编辑成功"),e.$router.push("/manageSystem/manager/department"))}).catch(function(e){console.log(e)})})},handleCancel:function(){this.$router.push("/manageSystem/manager/department")}},mounted:function(){var e=this;this.$http({url:"/api/manageSystem/system/manager/department/getPermissionsList"}).then(function(t){if("00000"===t.data.code)return e.permissionsData=t.data.permissions,e.$http({url:"/api/manageSystem/system/manager/department/getDepartmentInfo",params:{id:e.$route.query.id}})}).then(function(t){e.formData=t.data.info}).catch(function(e){console.log(e)})}}}});