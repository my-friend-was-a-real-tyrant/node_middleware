webpackJsonp([140],{1247:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"coupon"}},[a("div",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"关键字："}},[a("el-input",{attrs:{placeholder:"请输入关键字",size:"small"},model:{value:t.formData.keywords,callback:function(e){t.formData.keywords=e},expression:"formData.keywords"}})],1),t._v(" "),a("el-form-item",[a("el-button",{staticClass:"el-icon-search",attrs:{type:"primary",size:"small"},on:{click:t.Query}},[t._v("查询")])],1),t._v(" "),a("el-form-item",[a("el-button",{staticClass:"el-icon-plus",attrs:{type:"success",size:"small"},on:{click:t.Add}},[t._v("添加")])],1)],1)],1),t._v(" "),a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",border:"",data:t.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"70",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"code",label:"优惠券码","min-width":"120",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"userId",label:"使用人","min-width":"80",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(1==e.row.status?"未领取":2==e.row.status?"待使用":"已使用"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"create_time",label:"创建时间","min-width":"150",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"upload_time",label:"修改时间","min-width":"150",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"编辑",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"el-icon-edit",attrs:{type:"warning",size:"small"},on:{click:function(a){t.Exit(e.row)}}},[t._v("编辑")])]}}])})],1),t._v(" "),a("div",{staticStyle:{"padding-top":"20px"}},[a("el-pagination",{staticClass:"fr",attrs:{layout:"total, prev, pager, next, jumper","current-page":t.pageData.currentPage,total:t.pageData.totalSize,"page-size":t.pageData.pageSize},on:{"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:"修改状态",visible:t.dialogVisible,width:"20%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",[a("el-form",{staticClass:"demo-form-inline"},[a("el-form-item",{attrs:{label:"优惠券码："}},[a("span",[t._v(t._s(t.formData.code))])]),t._v(" "),a("el-form-item",{attrs:{label:"状态："}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.formData.select,callback:function(e){t.formData.select=e},expression:"formData.select"}},[a("el-option",{key:"1",attrs:{label:"未领取",value:"1"}}),t._v(" "),a("el-option",{key:"2",attrs:{label:"待使用",value:"2"}}),t._v(" "),a("el-option",{key:"3",attrs:{label:"已使用",value:"3"}})],1)],1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.Confirm}},[t._v("确定")])],1)])],1)])},staticRenderFns:[]}},366:function(t,e,a){var i=a(65)(a(878),a(1247),null,null,null);t.exports=i.exports},878:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(36),n=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default={data:function(){return{tableData:[],pageData:{currentPage:1,totalSize:0,pageSize:10},formData:{keywords:"",select:"",code:"",id:""},dialogVisible:!1}},mounted:function(){this.Get()},methods:{Get:function(){var t=this;this.$http({url:"/api/manageSystem/system/property/externalActivity/getActivityGoldList",params:{pageNo:this.pageData.currentPage,pageSize:this.pageData.pageSize,keywords:this.formData.keywords}}).then(function(e){if("00000"===e.data.code){var a=e.data.data;t.pageData.totalSize=a.total,a.list.forEach(function(e){e.create_time=t.ParseTime(e.createTime,"{y}-{m}-{d} {h}:{i}:{s}"),e.upload_time=t.ParseTime(e.updateTime,"{y}-{m}-{d} {h}:{i}:{s}")}),t.tableData=a.list}}).catch(function(t){})},handleCurrentChange:function(t){this.pageData.currentPage=t,this.Get()},Query:function(){this.Get()},Add:function(){var t=this;this.$prompt("请输入新建优惠券的数量","新建优惠券",{confirmButtonText:"确定",inputPattern:/^[0-9]*$/,inputErrorMessage:"请输入正确的数量"}).then(function(e){var a=e.value;t.$http({url:"/api/manageSystem/system/property/externalActivity/createCoupon",method:"post",data:{quantity:a}}).then(function(e){200===e.status&&("00000"===e.data.code?(t.$message({type:"success",message:"添加成功",center:!0}),t.Get()):t.$message({type:"error",message:"添加失败",center:!0}))}).catch(function(t){})}).catch(function(){t.$message({type:"info",message:"已取消",center:!0})})},handleClose:function(){this.dialogVisible=!1},Exit:function(t){this.formData.select=String(t.status),this.formData.id=t.id,this.formData.code=t.code,this.dialogVisible=!0},Confirm:function(){var t=this,e={activityGoldId:this.formData.id};this.$http({url:"/api/manageSystem/system/property/externalActivity/updateCouponStatu",method:"patch",data:e}).then(function(e){200===e.status&&("00000"===e.data.code?(t.$message({type:"success",message:"修改成功",center:!0}),t.Get()):t.$message({type:"error",message:"修改失败",center:!0}))}).catch(function(t){})},ParseTime:function(t,e){if(0===arguments.length)return null;var a=e||"{y}-{m}-{d} {h}:{i}:{s}",i=void 0;"object"===(void 0===t?"undefined":(0,n.default)(t))?i=t:(10===(""+t).length&&(t=1e3*parseInt(t)),i=new Date(t));var l={y:i.getFullYear(),m:i.getMonth()+1,d:i.getDate(),h:i.getHours(),i:i.getMinutes(),s:i.getSeconds(),a:i.getDay()};return a.replace(/{(y|m|d|h|i|s|a)+}/g,function(t,e){0==l.a&&(l.a=7);var a=l[e];return"a"===e?["星期一","星期二","星期三","星期四","星期五","星期六","星期日"][a-1]:(t.length>0&&a<10&&(a="0"+a),a||0)})}}}}});