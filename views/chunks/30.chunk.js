webpackJsonp([30],{1034:function(t,e){},1215:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"title",rawName:"v-title",value:"园区报事",expression:"'园区报事'"}],staticClass:"repairment"},[i("div",{staticClass:"repairment-area"},[i("span",[t._v("报事类型")]),t._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:t.formData.type,expression:"formData.type"}],on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.formData.type=e.target.multiple?i:i[0]}}},[i("option",{attrs:{value:"1"}},[t._v("服务报事")]),t._v(" "),i("option",{attrs:{value:"2"}},[t._v("安保报事")]),t._v(" "),i("option",{attrs:{value:"3"}},[t._v("绿化报事")]),t._v(" "),i("option",{attrs:{value:"4"}},[t._v("设备报事")])])]),t._v(" "),i("div",{staticClass:"repairment-area"},[i("span",[t._v("标题")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.formData.title,expression:"formData.title",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"请填写您的标题"},domProps:{value:t.formData.title},on:{input:function(e){e.target.composing||(t.formData.title=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),i("div",{staticClass:"repairment-content"},[i("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.formData.content,expression:"formData.content",modifiers:{trim:!0}}],attrs:{placeholder:"请输入您的内容"},domProps:{value:t.formData.content},on:{input:function(e){e.target.composing||(t.formData.content=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}}),t._v(" "),i("zdUpload",{ref:"commonRepairUpload",attrs:{uploadId:"img-02",uploadType:"2",uploadFileType:"1",annotation:"最多6张",maxLength:6},model:{value:t.formData.imgList,callback:function(e){t.formData.imgList=e},expression:"formData.imgList"}})],1),t._v(" "),i("ul",{staticClass:"repairment-info"},[i("li",[i("span",[t._v("姓名")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.formData.name,expression:"formData.name",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"请输入您的姓名"},domProps:{value:t.formData.name},on:{input:function(e){e.target.composing||(t.formData.name=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),i("li",[i("span",[t._v("手机号")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.formData.cellphone,expression:"formData.cellphone",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"请输入您的手机号"},domProps:{value:t.formData.cellphone},on:{input:function(e){e.target.composing||(t.formData.cellphone=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])]),t._v(" "),i("zdButton",{staticClass:"repairment-button",attrs:{disabled:t.commonRepairButton},on:{click:t.handleSubmitCommonRepairment}},[t._v("提交信息")])],1)},staticRenderFns:[]}},470:function(t,e,i){function a(t){i(1034)}var n=i(65)(i(991),i(1215),a,"data-v-3525b5d4",null);t.exports=n.exports},781:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{type:String,size:{type:String,default:"large"},disabled:Boolean},methods:{handleClick:function(t){null!=this.disabled&&!1!==this.disabled||this.$emit("click",t)}}}},782:function(t,e){},783:function(t,e,i){function a(t){i(782)}var n=i(65)(i(781),i(784),a,null,null);t.exports=n.exports},784:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("button",{staticClass:"zd-button",class:[t.size?"zd-button-"+t.size:"",t.type?"zd-button-"+t.type:"",{"zd-button-disabled":t.disabled}],attrs:{disabled:t.disabled},on:{click:t.handleClick}},[i("span",[t._t("default")],2)])},staticRenderFns:[]}},802:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{value:{type:Array},uploadType:{},uploadFileType:{},uploadId:{},maxLength:{type:Number},annotation:{},multiple:{type:Boolean,default:!0}},data:function(){return{support:!0,imgArr:[],times:0,onProgressCount:0,imgSrc:"",showImg:!1}},computed:{imgServerUrlArr:function(){for(var t=[],e=0;e<this.imgArr.length;e++)t.push(this.imgArr[e].serverUrl);return t},getFull:function(){return!(this.imgArr.length>=this.maxLength)},isIos:function(){var t=navigator.userAgent.toLowerCase();return-1!=t.indexOf("iphone")||-1!=t.indexOf("ipad")}},methods:{hidden:function(){this.showImg=!1,this.imgSrc=""},bigImg:function(t){this.imgSrc=t,this.showImg=!0},handleAddClick:function(){document.getElementById("zd-upload-file-"+this.uploadId).click()},handleAddChange:function(){for(var t=this,e=0;e<document.getElementById("zd-upload-file-"+t.uploadId).files.length;e++)!function(e){var i=new FileReader;i.onloadend=function(i){var a="files"+t.times;t.pushIntoImgArr(a,i.target.result),t.times++;var n=t.imgArr.length-1,o=new FormData;o.append("file",document.getElementById("zd-upload-file-"+t.uploadId).files[e]),o.append("uploadType",t.uploadType),o.append("fileSuffixType",t.uploadFileType),t.onProgressCount++,t.$http({url:"/v1/file",method:"post",data:o,onUploadProgress:function(e){t.imgArr[n].progressingWidth=e.loaded/e.total*1.8}}).then(function(e){t.onProgressCount--,1e4===e.data.code&&1e4===e.data.returnData.subCode?(t.imgArr[n].serverUrl=e.data.returnData.data.filePath,t.imgArr[n].uploading=!1):t.imgArr.splice(n,1),t.$emit("input",t.imgServerUrlArr),document.getElementById("zd-upload-file-form-"+t.uploadId).reset()}).catch(function(e){t.onProgressCount--,t.imgArr.splice(n,1),alert("因为未知的原因，图片上传失败")})},i.readAsDataURL(document.getElementById("zd-upload-file-"+t.uploadId).files[e])}(e)},handleDel:function(t,e){this.imgArr.splice(t,1),this.$emit("input",this.imgServerUrlArr)},pushIntoImgArr:function(t,e){this.imgArr.push({key:t,src:e,progressingWidth:0,uploading:!0,serverUrl:""})}},created:function(){FileReader||(this.support=!1,alert("您的浏览器暂不支持图片上传"))}}},804:function(t,e){},805:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAIAAABKGoy8AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpkMTJhOWM4Zi04Y2ZkLTUyNDctOWE3MS05ZDM3ZTBmZmJlMTYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6Qjk4MkRDNzA1MzExMTFFN0JGOTBFQzc2OEM2OEVGOUYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6Qjk4MkRDNkY1MzExMTFFN0JGOTBFQzc2OEM2OEVGOUYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OTFmNjIxNWItNjFkOC0zNjQzLTkyYTctMGZhODcxYWFmNTNiIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOmQxMmE5YzhmLThjZmQtNTI0Ny05YTcxLTlkMzdlMGZmYmUxNiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PnRozEYAAADjSURBVHja7Nk9DoQgEAVgEQ6gNsAhuP9BPISx8KeQEtjJkmyMydowG0n2TTVYTL6YQHwivPdNcaWUpmna9536ruustUKI8rGq4ah5npdlyT01JCNf+diWBbeu63m5bRvLWB5cCOFm+TDuRwUccMABBxxwwAEHHHD/iRPHceRUx/XhX15Sypwv1TnVVVL0mnK+bC+prp6ifFn3hhiGoU5Z3/dKax1jrHBDGGMEy4+ccRwvT5xzOISBAw444IADDjjggAMOuO+R5Gb5MO6SLynVsYzluan+5MvmfY1OqY5l7EuAAQDa/FPwQV7cCwAAAABJRU5ErkJggg=="},806:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpkMTJhOWM4Zi04Y2ZkLTUyNDctOWE3MS05ZDM3ZTBmZmJlMTYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MjAxODhERUQ1MzMzMTFFNzk0RkZFNDgxMzMyN0ZCOUMiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MjAxODhERUM1MzMzMTFFNzk0RkZFNDgxMzMyN0ZCOUMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5MWY2MjE1Yi02MWQ4LTM2NDMtOTJhNy0wZmE4NzFhYWY1M2IiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ZDEyYTljOGYtOGNmZC01MjQ3LTlhNzEtOWQzN2UwZmZiZTE2Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+6dNudQAAAaFJREFUeNq8ls9OwkAQxtuH0CNy1qfwCAkWSEuRhGcwxoNP0WN5AyX6BHjSl/CqaVL+FQKJXGxaGGearWnL7pYiOMnvwmy+6X4zu4uqyKOEdJBL5Bw5QQLERRzkDXlCPpWCQcKPSIhADmu2trSr+BXytYNwlhVynSd+w74I9mSD3IrETbYA/siGaW15vjqAeNKuVE8eDige04/Fz0S+m6YJy+USxuMx1Ov1VK7VasFsNovI5hLTRdrKPU9cVVVYLBYQRxAEYBhGlOt2uxCG4W/O8zzRLkhbGYi2OZ1OIRlUxLbtlDiF67qiAqQdnUrugkajsSWWDd/3oVKpiAqQtvItaxZ5LSpC4pqmyRrt5xYger0et4BlWXmT5Est4jU025O48TKLXvaxJ1lEYtNAOKYEzXjWc7KlwBRFY1rmHTQ6B/P5nNtQsiVZZDgcig5aOT7Nfd4X6Loe7cJxHKhWq6lcs9mEyWQCo9EIarWa9Kr4l8uOon3A67p9zAfn7phPZqfIo9/fcTdrtpb76KsF/rZcIKfsdw95R16RZ+RDJPAjwACxqseZs3zV6AAAAABJRU5ErkJggg=="},808:function(t,e,i){function a(t){i(804)}var n=i(65)(i(802),i(810),a,null,null);t.exports=n.exports},810:function(t,e,i){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.showImg?a("transition",{attrs:{name:"fade"}},[a("div",{staticClass:"img-view",on:{click:t.hidden}},[a("div",{staticClass:"img-layer"}),t._v(" "),a("img",{attrs:{src:t.imgSrc}})])]):t._e(),t._v(" "),a("div",{staticClass:"zd-upload-wrapper",class:t.support?"":"zd-upload-none"},[t._l(t.imgArr,function(e,n){return a("div",{key:e.key,staticClass:"zd-upload-item"},[a("img",{attrs:{src:e.src},on:{click:function(i){t.bigImg(e.src)}}}),t._v(" "),e.uploading?a("div",{staticClass:"zd-upload-item-progress"},[a("i",{style:{width:e.progressingWidth+"rem"}})]):a("img",{staticClass:"zd-upload-item-del",attrs:{src:i(806)},on:{click:function(i){t.handleDel(n,e.key)}}})])}),t._v(" "),!0===t.getFull?a("div",{staticClass:"zd-upload-button",on:{click:t.handleAddClick}},[a("img",{staticClass:"zd-upload-button-add",attrs:{src:i(805)}}),t._v(" "),t._m(0),t._v(" "),a("p",{staticClass:"zd-upload-button-word zd-upload-button-word-s"},[a("span",[t._v(t._s("("+t.annotation+")"))])])]):t._e(),t._v(" "),a("form",{attrs:{id:"zd-upload-file-form-"+t.uploadId}},[a("input",{staticClass:"zd-upload-file-add",attrs:{type:"file",accept:"image/*",capture:!t.isIos&&"camera",id:"zd-upload-file-"+t.uploadId,multiple:t.isIos?!!t.multiple&&"multiple":"multiple"},on:{change:t.handleAddChange}})])],2)],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{staticClass:"zd-upload-button-word"},[i("span",[t._v("照片/拍照")])])}]}},991:function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=i(808),o=a(n),r=i(783),l=a(r);e.default={components:{zdUpload:o.default,zdButton:l.default},data:function(){return{formData:{roomId:"",type:1,title:"",content:"",imgList:[],name:"",cellphone:""},commonRepairButton:!1}},computed:{isVisitor:function(){return this.$store.state.isVisitor},info:function(){return this.$store.state.info},formValidate:function(){return""===this.formData.type||""===this.formData.title||""===this.formData.content||""===this.formData.name||""===this.formData.cellphone?"请将表单填写完整":!1!==/^1(([3,8]\d)|(5[0-3,5-9])|(47)|(7[5-8]))(\d{8})$/.test(this.formData.cellphone)||"请填写正确的手机号"}},methods:{handleSubmitCommonRepairment:function(){var t=this;!0===this.formValidate?this.$http({url:"/api/system/service/report/submitReport",method:"post",data:{parkId:this.info.defaultParkId,roomId:this.formData.roomId,type:this.formData.type,title:this.formData.title,content:this.formData.content,imgList:this.formData.imgList,name:this.formData.name,cellphone:this.formData.cellphone}}).then(function(e){"00000"===e.data.code&&(t.$message("提交成功"),t.$router.replace("/person/myReport"))}).catch(function(t){console.log(t)}):alert(this.formValidate)}},mounted:function(){var t=this;!0===this.isVisitor?(alert("本功能只对业主开放，请到“个人中心”完善信息"),this.$router.replace("/index/visitorPerson")):(this.formData.roomId=this.info.defaultAddressId,this.formData.name=this.info.userName,this.formData.cellphone=this.info.cellphone,this.$watch("$refs.commonRepairUpload.onProgressCount",function(e,i){t.commonRepairButton=0!==e}))}}}});