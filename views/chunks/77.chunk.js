webpackJsonp([77],{1117:function(t,e){},1118:function(t,e){},1304:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"waterDetail"},[a("div",{staticClass:"waterDetail-leftMoney"},[a("div",[a("span",[t._v("预存金额：")]),t._v(" "),a("span",[t._v(t._s(t.leftMoney))])]),t._v(" "),a("div",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.leftshow=!0}}},[t._v("编辑")])],1)]),t._v(" "),a("div",{staticClass:"waterDetail-head"},[a("div",{staticClass:"waterDetail-head-title"},[t._v("\n      明细 \n    ")]),t._v(" "),a("div",{staticClass:"waterDetail-head-choseTime"},[a("div",[a("div",{staticClass:"waterDetail-block"},[a("span",{staticClass:"demonstration"},[t._v("选择日期：")]),t._v(" "),a("el-date-picker",{attrs:{type:"month",placeholder:"开始时间"},on:{change:t.startChange},model:{value:t.monthstart,callback:function(e){t.monthstart=e},expression:"monthstart"}}),t._v("\n          至\n          "),a("el-date-picker",{attrs:{type:"month",placeholder:"结束时间"},on:{change:t.endChange},model:{value:t.monthend,callback:function(e){t.monthend=e},expression:"monthend"}})],1)])])]),t._v(" "),a("div",{staticClass:"waterDetail-address"},[t._v("\n    "+t._s(t.$store.state.info.parkName)+"\n  ")]),t._v(" "),a("div",{staticClass:"waterDetail-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:""}},[a("el-table-column",{attrs:{prop:"billYear",label:"年份"}}),t._v(" "),a("el-table-column",{attrs:{prop:"billMonth",label:"月份"}}),t._v(" "),a("el-table-column",{attrs:{prop:"waterCost",label:"水费"}}),t._v(" "),a("el-table-column",{attrs:{prop:"electricityCost",label:"电费"}}),t._v(" "),a("el-table-column",{attrs:{prop:"airCost",label:"空调费"}}),t._v(" "),a("el-table-column",{attrs:{prop:"costType",label:"缴纳情况"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"waterDetail-table-operate",on:{click:function(a){t.diashow=!0,t.id=e.row.id}}},[t._v("编辑")])]}}])})],1),t._v(" "),a("div",{staticClass:"waterDetail-table-page"},[a("el-pagination",{attrs:{"current-page":t.pageData.currentPage,"page-sizes":[10,20,50,100],"page-size":t.pageData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.pageData.totalSize},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.leftshow,expression:"leftshow"}],staticClass:"waterDetail-dia"},[a("div",{staticClass:"waterDetail-dia-con waterDetail-dia-con1"},[a("div",{staticClass:"waterDetail-dia-con-title"},[t._v("\n        编辑\n      ")]),t._v(" "),a("el-form",{ref:"ruleForm1",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm1,rules:t.rules1,"label-width":"100px"}},[a("div",{staticClass:"waterDetail-dia-con-pay"},[a("el-form-item",{attrs:{label:"预存余额：",prop:"cost"}},[a("el-input",{model:{value:t.ruleForm1.cost,callback:function(e){t.ruleForm1.cost=t._n(e)},expression:"ruleForm1.cost"}})],1)],1),t._v(" "),a("div",{staticClass:"waterDetail-dia-con-btn"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitFormLeft("ruleForm1")}}},[t._v("确定")]),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.cancelLeft()}}},[t._v("取消")])],1)])],1)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.diashow,expression:"diashow"}],staticClass:"waterDetail-dia"},[a("div",{staticClass:"waterDetail-dia-con"},[a("div",{staticClass:"waterDetail-dia-con-title"},[t._v("\n        编辑\n      ")]),t._v(" "),a("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm2,rules:t.rules2,"label-width":"100px"}},[a("div",{staticClass:"waterDetail-dia-con-pay"},[a("el-form-item",{attrs:{label:"水费：",prop:"waterCost"}},[a("el-input",{model:{value:t.ruleForm2.waterCost,callback:function(e){t.ruleForm2.waterCost=t._n(e)},expression:"ruleForm2.waterCost"}})],1),t._v(" "),a("span",[t._v("元")])],1),t._v(" "),a("div",{staticClass:"waterDetail-dia-con-pay"},[a("el-form-item",{attrs:{label:"电费：",prop:"electricityCost"}},[a("el-input",{model:{value:t.ruleForm2.electricityCost,callback:function(e){t.ruleForm2.electricityCost=t._n(e)},expression:"ruleForm2.electricityCost"}})],1),t._v(" "),a("span",[t._v("元")])],1),t._v(" "),a("div",{staticClass:"waterDetail-dia-con-pay"},[a("el-form-item",{attrs:{label:"空调费：",prop:"airCost"}},[a("el-input",{model:{value:t.ruleForm2.airCost,callback:function(e){t.ruleForm2.airCost=t._n(e)},expression:"ruleForm2.airCost"}})],1),t._v(" "),a("span",[t._v("元")])],1),t._v(" "),a("div",{staticClass:"waterDetail-dia-con-btn"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm2")}}},[t._v("确定")]),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.cancel()}}},[t._v("取消")])],1)])],1)])])},staticRenderFns:[]}},406:function(t,e,a){function r(t){a(1117),a(1118)}var o=a(65)(a(918),a(1304),r,"data-v-c57f9c36",null);t.exports=o.exports},918:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){var t=function(t,e,a){if(!e)return a(new Error("金额不能为空"));Number(e)?e<0?a(new Error("请输入正数")):a():a(new Error("请输入数字值"))};return{id:"",leftMoneyId:"",leftshow:!1,leftMoney:"",timerange:"",monthend:"",monthendform:"",monthstart:"",monthstartform:"",radio2:1,diashow:!1,tableData:[],pageData:{currentPage:1,totalSize:0,pageSize:10},ruleForm1:{age:""},ruleForm2:{waterCost:"",electricityCost:"",airCost:""},rules1:{cost:[{validator:t,trigger:"blur"}]},rules2:{waterCost:[{validator:t,trigger:"blur"}],electricityCost:[{validator:t,trigger:"blur"}],airCost:[{validator:t,trigger:"blur"}]}}},methods:{submitFormLeft:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;e.$http({url:"/api/manageSystem/system/property/payment/waterLeftEdit",method:"post",data:{roomId:e.$route.query.roomId,id:e.leftMoneyId,preStorage:e.ruleForm1.cost}}).then(function(t){"00000"===t.data.code&&(e.leftMoney=t.data.data.returnData.preStorage,e.leftshow=!1)}).catch(function(t){console.log(t)})})},submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;e.$http({url:"/api/manageSystem/system/property/payment/waterDetailEdit",method:"post",data:{id:e.id,waterCost:e.ruleForm2.waterCost,electricityCost:e.ruleForm2.electricityCost,airCost:e.ruleForm2.airCost}}).then(function(t){"00000"===t.data.code&&(e.ajaxFun(),e.diashow=!1)}).catch(function(t){console.log(t)})})},cancelLeft:function(){this.leftshow=!1},cancel:function(){this.diashow=!1},startChange:function(){this.monthstartform=this.monthstart.getFullYear()+"-"+(this.monthstart.getMonth()+1)+"-1",this.monthend&&this.monthstart&&this.monthend.getTime()<=this.monthstart.getTime()&&(this.$message("开始时间应早于结束时间"),this.monthstart="",this.monthstartform=""),this.monthstartform&&this.monthendform&&this.ajaxFun(1)},endChange:function(){this.monthendform=this.monthend.getFullYear()+"-"+(this.monthend.getMonth()+1)+"-1",this.monthend&&this.monthstart&&this.monthend.getTime()<=this.monthstart.getTime()&&(this.$message("结束时间应晚于开始时间"),this.monthend="",this.monthendform=""),this.monthstartform&&this.monthendform&&this.ajaxFun(1)},handleSizeChange:function(t){this.pageData.pageSize=t},handleCurrentChange:function(t){this.pageData.currentPage=t},ajaxFun:function(t){var e=this;this.$http({url:"/api/manageSystem/system/property/payment/waterDetail",methods:"get",params:{roomId:this.$route.query.roomId,pageNumber:t?1:this.pageData.currentPage,pageSize:t?10:this.pageData.pageSize,start:this.monthstartform,end:this.monthendform}}).then(function(t){"00000"===t.data.code&&(e.tableData=t.data.data.returnData.list,e.pageData.totalSize=t.data.data.returnData.total)}).catch(function(t){console.log(t)})}},mounted:function(){var t=this;this.ajaxFun(),this.$http({url:"/api/manageSystem/system/property/payment/waterLeft",methods:"get",params:{roomId:this.$route.query.roomId}}).then(function(e){"00000"===e.data.code&&(t.leftMoney=e.data.data.returnData.preStorage,t.leftMoneyId=e.data.data.returnData.id)}).catch(function(t){})},computed:{},watch:{"pageData.currentPage":function(){this.ajaxFun()},"pageData.pageSize":function(){this.ajaxFun()}}}}});