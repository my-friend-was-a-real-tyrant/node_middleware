webpackJsonp([118],{1058:function(t,e){},1243:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contain-main"},[t._m(0),t._v(" "),a("el-form",{ref:"formData",staticClass:"scoped-form",attrs:{model:t.formData,rules:t.formRules,"label-width":"150px","label-position":"right",inline:""}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"联系人：",prop:"contact"}},[a("el-input",{attrs:{size:"small"},model:{value:t.formData.contact,callback:function(e){t.formData.contact=e},expression:"formData.contact"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"联系方式：",required:"",prop:"cellphone"}},[a("el-input",{attrs:{size:"small"},model:{value:t.formData.cellphone,callback:function(e){t.formData.cellphone=e},expression:"formData.cellphone"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"报名截止时间：",prop:"enrollEndDate"}},[a("el-date-picker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm:ss",size:"small"},model:{value:t.formData.enrollEndDate,callback:function(e){t.formData.enrollEndDate=e},expression:"formData.enrollEndDate"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"活动时间：",required:""}},[a("el-form-item",{attrs:{prop:"activityStartDatetime"}},[a("el-date-picker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm:ss",size:"small"},model:{value:t.formData.activityStartDatetime,callback:function(e){t.formData.activityStartDatetime=e},expression:"formData.activityStartDatetime"}})],1),t._v(" "),a("span",[t._v("--")]),t._v(" "),a("el-form-item",{attrs:{prop:"activityEndDatetime"}},[a("el-date-picker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm:ss",size:"small"},model:{value:t.formData.activityEndDatetime,callback:function(e){t.formData.activityEndDatetime=e},expression:"formData.activityEndDatetime"}})],1)],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"活动地址：",prop:"address"}},[a("el-input",{attrs:{size:"small"},model:{value:t.formData.address,callback:function(e){t.formData.address=e},expression:"formData.address"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"活动对象：",prop:"target"}},[a("el-input",{attrs:{size:"small"},model:{value:t.formData.target,callback:function(e){t.formData.target=e},expression:"formData.target"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"活动人数：",prop:"maxCount",required:""}},[a("el-input",{attrs:{size:"small"},model:{value:t.formData.maxCount,callback:function(e){t.formData.maxCount=e},expression:"formData.maxCount"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"单个账号报名人数：",prop:"userCountMax",required:""}},[a("el-input",{attrs:{size:"small"},model:{value:t.formData.userCountMax,callback:function(e){t.formData.userCountMax=e},expression:"formData.userCountMax"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"标题：",prop:"title"}},[a("el-input",{attrs:{size:"small",maxlength:50},model:{value:t.formData.title,callback:function(e){t.formData.title=e},expression:"formData.title"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"内容：",prop:"content"}},[a("el-input",{attrs:{type:"textarea",size:"small",autosize:{minRows:3},maxlength:500},model:{value:t.formData.content,callback:function(e){t.formData.content=e},expression:"formData.content"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"上传图片：",prop:"imgList"}},[a("el-upload",{ref:"uploadImg",attrs:{action:"/v1/file","list-type":"picture-card",name:"file",accept:"image/*",data:{uploadType:11,fileSuffixType:1},"on-success":t.handleFileUpload,"on-preview":t.handlePictureCardPreview,"on-change":t.handleImgChange,"on-remove":t.handleImgChange,"before-upload":t.handleCheckImgLength}},[a("i",{staticClass:"el-icon-plus"},[a("span",{staticClass:"description"},[t._v("最多上传9张图片")])])])],1)],1)],1),t._v(" "),a("el-form-item",{attrs:{label:" "}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.handleAddActivity}},[t._v("确定")]),t._v(" "),a("el-button",{attrs:{size:"small"},on:{click:t.handleReturn}},[t._v("返回")])],1)],1),t._v(" "),a("el-dialog",{attrs:{size:"tiny"},model:{value:t.dialogVisible,callback:function(e){t.dialogVisible=e},expression:"dialogVisible"}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contain-title"},[a("span",[t._v("添加活动")])])}]}},393:function(t,e,a){function r(t){a(1058)}var l=a(65)(a(905),a(1243),r,"data-v-505e571a",null);t.exports=l.exports},905:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){var t=function(t,e,a){if(""===e)a(new Error("请输入联系方式"));else{!1===/^1[345789]\d{9}$/.test(e)?a(new Error("请输入正确的手机号")):a()}},e=function(t,e,a){if(""===e)a();else if(!0===isNaN(Number(e)))a(new Error("请输入一个正整数"));else{var r=/^\d*$/;!1===r.test(e)?a(new Error("请输入一个正整数")):a()}};return{dialogVisible:!1,dialogImageUrl:"",formData:{contact:"",cellphone:"",enrollEndDate:"",activityStartDatetime:"",activityEndDatetime:"",address:"",target:"",maxCount:"",title:"",content:"",imgList:[],userCountMax:""},formRules:{contact:[{required:!0,message:"请输入联系人",trigger:"blur"}],cellphone:[{validator:t,trigger:"blur"}],enrollEndDate:[{type:"date",required:!0,message:"请选择报名截止日期",trigger:"blur"}],activityStartDatetime:[{type:"date",required:!0,message:"请选择活动开始时间",trigger:"blur"}],activityEndDatetime:[{type:"date",required:!0,message:"请选择活动结束时间",trigger:"blur"}],address:[{required:!0,message:"请输入活动地址",trigger:"blur"}],target:[{required:!0,message:"请输入活动对象",trigger:"blur"}],maxCount:[{validator:e,trigger:"blur"}],userCountMax:[{validator:e,trigger:"blur"}],title:[{required:!0,message:"请输入标题",trigger:"blur"}],content:[{required:!0,message:"请输入内容",trigger:"blur"}]}}},methods:{handleFileUpload:function(t,e,a){if(1e4!==t.code||1e4!==t.returnData.subCode)if("E0004"===t.code)this.$router.push("/manageSystem/login");else{this.$alert(t.message,"提示",{confirmButtonText:"确定"});for(var r=0;r<a.length;r++)if(a[r]===e){a.splice(r,1);break}}},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},handleImgChange:function(t,e){for(var a=[],r=0;r<e.length;r++)!0===Object.prototype.hasOwnProperty.call(e[r],"response")&&a.push(e[r].response.returnData.data.filePath);this.formData.imgList=a},handleCheckImgLength:function(t){return!1===/(.(jpg|gif|jpeg|png))+$/i.test(t.name)?(this.$alert("请上传正确格式的图片","提示"),!1):this.$refs.uploadImg.uploadFiles.length>9?(this.$alert("限上传九张图片","提示"),!1):void 0},handleReturn:function(){this.$router.push("/manageSystem/property/activity")},handleAddActivity:function(){var t=this;this.$refs.formData.validate(function(e){if(!e)return!1;t.$http({url:"/api/manageSystem/system/property/activity/addActivity",method:"post",data:t.formData}).then(function(e){"00000"===e.data.code&&(t.$message("添加成功"),t.$router.push("/manageSystem/property/activity"))}).catch(function(t){})})}}}}});