webpackJsonp([132],{1089:function(e,t){},1273:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"contain-main"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"关键字"}},[a("el-input",{attrs:{size:"small"},model:{value:e.formData.keywords,callback:function(t){e.formData.keywords=t},expression:"formData.keywords"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"优惠种类"}},[a("el-select",{attrs:{size:"small"},model:{value:e.formData.preferentialType,callback:function(t){e.formData.preferentialType=t},expression:"formData.preferentialType"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"满减券",value:1}}),e._v(" "),a("el-option",{attrs:{label:"打折券",value:2}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"券种类"}},[a("el-select",{attrs:{size:"small"},model:{value:e.formData.type,callback:function(t){e.formData.type=t},expression:"formData.type"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"商城券",value:1}}),e._v(" "),a("el-option",{attrs:{label:"商户券",value:2}}),e._v(" "),a("el-option",{attrs:{label:"支付券",value:3}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"search",size:"small"},on:{click:e.searchFun}},[e._v("搜索")])],1),e._v(" "),a("el-form-item",[a("el-button",{directives:[{name:"permit",rawName:"v-permit",value:3301,expression:"3301"}],attrs:{type:"primary",size:"small"},on:{click:e.createCouponRouter}},[e._v("添加优惠券")])],1),e._v(" "),a("div",[a("el-form-item",{attrs:{label:"排序规则"}},[a("el-radio-group",{on:{change:e.searchFun},model:{value:e.formData.sortRule,callback:function(t){e.formData.sortRule=t},expression:"formData.sortRule"}},[a("el-radio",{attrs:{label:1}},[e._v("按下单时间升序")]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("按下单时间降序")])],1)],1)],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:e.tableData}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left"}},[a("el-form-item",{attrs:{label:"描述："}},[a("p",[a("span",[e._v(e._s(t.row.description))])])]),e._v(" "),a("el-form-item",{attrs:{label:"创建时间："}},[a("p",[a("span",[e._v(e._s(t.row.createDatetime))])])]),e._v(" "),a("el-form-item",[a("p",[e._v("兑换码：")]),e._v(" "),e._l(t.row.exchanList,function(t,r){return a("p",{key:r},[a("input",{attrs:{type:"text",disabled:""},domProps:{value:t.exchangeCode}}),e._v(" "),t.userId?a("span",[e._v("已用")]):a("span",[e._v("未用")]),e._v(" "),a("span",{staticStyle:{color:"green",cursor:"pointer"},on:{click:function(a){e.copy(t)}}},[e._v("复制")])])})],2)],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"number",label:"编号","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"merchantName",label:"发放商户","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"couponDescription",label:"面值","min-width":"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"deliveryDatetime",label:"发放时间","min-width":"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"expireDatetime",label:"过期时间","min-width":"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"quantity",label:"总量","min-width":"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"deliveryQuantity",label:"已领","min-width":"80"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"permit",rawName:"v-permit",value:3303,expression:"3303"}],attrs:{type:"danger",size:"small",icon:"delete",disabled:0===t.row.timeout},on:{click:function(a){e.deleteCoupon(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",[a("div",{staticClass:"contain-bottom-pagination"},[a("el-pagination",{staticClass:"fr",attrs:{layout:"total, prev, pager, next, jumper","current-page":e.pageData.currentPage,total:e.pageData.totalSize,"page-size":e.pageData.pageSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])],1)},staticRenderFns:[]}},373:function(e,t,a){function r(e){a(1089)}var n=a(65)(a(884),a(1273),r,"data-v-77fcab5e",null);e.exports=n.exports},884:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{formData:{keywords:"",preferentialType:"",type:"",sortRule:1},sendData:{keywords:"",preferentialType:"",type:"",sortRule:1},tableData:[],pageData:{currentPage:void 0!==this.$route.query.currentPage?parseInt(this.$route.query.currentPage):1,totalSize:1,pageSize:15}}},methods:{copy:function(e){var t=function(t){t.clipboardData.setData("text/plain",e.exchangeCode),t.preventDefault()};document.addEventListener("copy",t),document.execCommand("copy"),alert("复制成功")},watchQueryFun:function(){this.$route.query.currentPage?this.pageData.currentPage=parseInt(this.$route.query.currentPage):this.pageData.currentPage=1,this.ajaxFun()},ajaxFun:function(){var e=this;this.$http({url:"/api/manageSystem/system/mall/coupon/getCouponList",params:{keywords:this.sendData.keywords,preferentialType:this.sendData.preferentialType,type:this.sendData.type,pageNo:this.pageData.currentPage,pageSize:this.pageData.pageSize}}).then(function(t){"00000"===t.data.code&&(e.pageData.totalSize=t.data.count,e.tableData=t.data.couponList)}).catch(function(e){console.log(e)})},handleSizeChange:function(e){this.pageData.pageSize=e,this.$route.query.currentPage?this.$router.push({path:"/manageSystem/mall/coupon"}):this.$router.push({path:"/manageSystem/mall/coupon",query:{currentPage:1}})},handleCurrentChange:function(e){this.$router.push({path:"/manageSystem/mall/coupon",query:{currentPage:e}})},searchFun:function(){this.sendData.keywords=this.formData.keywords,this.sendData.preferentialType=this.formData.preferentialType,this.sendData.type=this.formData.type,this.$route.query.currentPage?this.$router.push({path:"/manageSystem/mall/coupon"}):this.$router.push({path:"/manageSystem/mall/coupon",query:{currentPage:1}})},createCouponRouter:function(){this.$router.push("/manageSystem/mall/coupon/createCoupon")},deleteCoupon:function(e){var t=this;this.$confirm("此操作将永久删除该优惠券, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http({url:"/api/manageSystem/system/mall/coupon/deleteCoupon",params:{id:e},method:"delete"}).then(function(e){"00000"===e.data.code&&(t.$message({type:"success",message:"删除成功!"}),t.searchFun())}).catch(function(e){console.log(e)})})}},mounted:function(){this.watchQueryFun()},watch:{"$route.query.currentPage":function(){this.watchQueryFun()}}}}});