webpackJsonp([100],{1015:function(t,e){},1193:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contain-main"},[t._m(0),t._v(" "),a("el-form",{ref:"formData",staticClass:"scoped-form",attrs:{rules:t.formRules,model:t.formData,"label-width":"100px","label-position":"left"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"编号："}},[a("span",[t._v(t._s(t.info.number))])])],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"咨询人"}},[a("span",[t._v(t._s(t.info.userName))])])],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"联系方式"}},[a("span",[t._v(t._s(t.info.userCellphone))])])],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"咨询时间"}},[a("span",[t._v(t._s(t.info.datetime))])])],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"内容"}},[a("pre",[t._v(t._s(t.info.content))])])],1)],1),t._v(" "),t._l(t.info.answer,function(e){return a("div",{key:e.id},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"回复人"}},[a("pre",[t._v(t._s(e.operator))])])],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"回复时间"}},[a("pre",[t._v(t._s(e.datetime))])])],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"回复内容"}},[a("pre",[t._v(t._s(e.content))])])],1)],1)],1)}),t._v(" "),a("el-form-item",{attrs:{label:"回复",prop:"answer"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:3},maxlength:500},model:{value:t.formData.answer,callback:function(e){t.formData.answer="string"==typeof e?e.trim():e},expression:"formData.answer"}})],1),t._v(" "),a("el-form-item",[a("el-button",{directives:[{name:"permit",rawName:"v-permit",value:1702,expression:"1702"}],attrs:{type:"primary",size:"small"},on:{click:t.handleAnswer}},[t._v("回复")]),t._v(" "),a("el-button",{directives:[{name:"permit",rawName:"v-permit",value:1702,expression:"1702"}],attrs:{type:"primary",size:"small"},on:{click:t.handleAppointTask}},[t._v("转派")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:t.handleCancel}},[t._v("返回")])],1)],2),t._v(" "),t._m(1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:t.info.operationRecordsList}},[a("el-table-column",{attrs:{prop:"event",label:"事件","min-width":"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"operation",label:"操作内容","min-width":"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注信息","min-width":"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"operator",label:"操作人","min-width":"160"}}),t._v(" "),a("el-table-column",{attrs:{prop:"operateDatetime",label:"操作时间","min-width":"150"}})],1),t._v(" "),a("el-dialog",{attrs:{title:"转派任务",visible:t.appointTaskDialogVisible,size:"small"},on:{"update:visible":function(e){t.appointTaskDialogVisible=e},close:t.handleResetAppointTask}},[a("el-form",{ref:"appointTaskForm",attrs:{model:t.appointTaskFormData,rules:t.appointTaskFormRules}},[a("el-form-item",{attrs:{prop:"remark"}},[a("el-input",{attrs:{placeholder:"请填写备注"},model:{value:t.appointTaskFormData.remark,callback:function(e){t.appointTaskFormData.remark=e},expression:"appointTaskFormData.remark"}})],1),t._v(" "),a("el-form-item",{attrs:{prop:"manager"}},[a("el-select",{style:{width:"100%"},attrs:{filterable:"",placeholder:"请选择要转派的人员"},model:{value:t.appointTaskFormData.manager,callback:function(e){t.appointTaskFormData.manager=e},expression:"appointTaskFormData.manager"}},t._l(t.appointTaskManagerList,function(t){return a("el-option",{key:t.value,attrs:{value:t.value,label:t.label}})}))],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",slot:"footer"},[a("el-button",{on:{click:t.handleCloseAppointTask}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmitAppointTask}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contain-title"},[a("span",[t._v("咨询建议详情")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contain-title"},[a("span",[t._v("操作记录")])])}]}},418:function(t,e,a){function r(t){a(1015)}var n=a(65)(a(930),a(1193),r,"data-v-15cf1ee3",null);t.exports=n.exports},930:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{info:{number:"",userName:"",userCellphone:"",datetime:"",content:"",answer:[{id:"",datetime:"",content:"",operator:""}],operationRecordsList:[]},formData:{answer:""},formRules:{answer:[{validator:function(t,e,a){""===e?a(new Error("请输入您的回复")):a()},trigger:"blur"}]},tableData:[],appointTaskManagerList:[],appointTaskDialogVisible:!1,appointTaskFormData:{remark:"",manager:""},appointTaskFormRules:{remark:[{required:!0,message:"请填写备注",trigger:"blur"}],manager:[{type:"number",required:!0,message:"请选择指派人员",trigger:"blur"}]}}},methods:{handleResetAppointTask:function(){this.$refs.appointTaskForm.resetFields()},handleCloseAppointTask:function(){this.appointTaskDialogVisible=!1},handleAppointTask:function(){this.appointTaskDialogVisible=!0},handleSubmitAppointTask:function(){var t=this;t.$refs.appointTaskForm.validate(function(e){if(!e)return!1;t.$http({url:"/api/manageSystem/system/property/suggestion/appointTask",method:"patch",data:{id:t.$route.query.id,remark:t.appointTaskFormData.remark,manager:t.appointTaskFormData.manager}}).then(function(e){"00000"===e.data.code&&(t.$message("转派成功"),t.$router.push("/manageSystem/property/suggestion"))}).catch(function(t){console.log(t)})})},handleAnswer:function(){var t=this,e=this;this.$refs.formData.validate(function(a){if(!a)return!1;e.$http({url:"/api/manageSystem/system/property/suggestion/answerSuggestion",method:"patch",data:{id:e.$route.query.id,answer:e.formData.answer}}).then(function(e){"00000"===e.data.code&&(t.$message("回复成功"),t.$router.push("/manageSystem/property/suggestion"))}).catch(function(t){console.log(t)})})},handleCancel:function(){this.$router.push("/manageSystem/property/suggestion")}},mounted:function(){var t=this;this.$http({url:"/api/manageSystem/system/property/suggestion/getSuggestionInfo",params:{id:this.$route.query.id}}).then(function(e){"00000"===e.data.code&&(t.info=e.data.suggestionInfo)}).catch(function(t){console.log(t)}),this.$http({url:"/api/manageSystem/system/property/suggestion/getAppointTaskManagerList"}).then(function(e){"00000"===e.data.code&&(t.appointTaskManagerList=e.data.managerList)}).catch(function(t){console.log(t)})}}}});